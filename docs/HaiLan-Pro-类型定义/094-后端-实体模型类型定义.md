---
@file: 094-后端-实体模型类型定义.md
@description: HaiLan Pro 后端实体模型类型定义，包含User、Product、Order、Device等
@author: YanYuCloudCube Team
@version: v1.0.0
@created: 2026-01-26
@updated: 2026-01-26
@status: published
@tags: [HaiLan-Pro-类型定义],[]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 094 后端-实体模型类型定义

## 概述

本文档详细描述HaiLan Pro-HaiLan-Pro-类型定义-后端-实体模型类型定义相关内容，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范后端-实体模型类型定义相关的业务标准与技术落地要求
- 为项目相关人员提供清晰的参考依据
- 保障相关模块开发、实施、运维的一致性与规范性

### 2. 设计原则

#### 2.1 五高原则
- **高可用性**：确保系统7x24小时稳定运行，支持PWA离线能力
- **高性能**：优化响应时间和处理能力，支持高并发访问
- **高安全性**：保护用户数据和隐私安全，双重加密机制
- **高扩展性**：支持业务快速扩展，微服务架构设计
- **高可维护性**：便于后续维护和升级，模块化设计

#### 2.2 五标体系
- **标准化**：统一的技术和流程标准
- **规范化**：严格的开发和管理规范
- **自动化**：提高开发效率和质量，CI/CD自动化
- **智能化**：利用AI技术提升能力，LLM智能顾问
- **可视化**：直观的监控和管理界面

#### 2.3 五化架构
- **流程化**：标准化的开发流程
- **文档化**：完善的文档体系
- **工具化**：高效的开发工具链
- **数字化**：数据驱动的决策
- **生态化**：开放的生态系统

### 3. 后端实体模型类型定义

#### 3.1 TypeORM实体基类

```typescript
// src/common/entities/base.entity.ts
import {
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  DeleteDateColumn,
  BeforeInsert,
  BeforeUpdate
} from 'typeorm';

/**
 * 基础实体类
 * 所有实体应继承此类
 */
export abstract class BaseEntity {
  /** 主键 - UUID格式 */
  @PrimaryGeneratedColumn('uuid')
  id: string;

  /** 创建时间 */
  @CreateDateColumn({ type: 'timestamp with time zone', default: () => 'CURRENT_TIMESTAMP' })
  createdAt: Date;

  /** 更新时间 */
  @UpdateDateColumn({ type: 'timestamp with time zone', default: () => 'CURRENT_TIMESTAMP' })
  updatedAt: Date;

  /** 删除时间（软删除） */
  @DeleteDateColumn({ type: 'timestamp with time zone', nullable: true })
  deletedAt?: Date;

  /**
   * 生成ID
   * @private
   */
  @BeforeInsert()
  protected generateId() {
    if (!this.id) {
      this.id = this.uuidv4();
    }
  }

  /**
   * 更新时间戳
   * @private
   */
  @BeforeUpdate()
  protected updateTimestamp() {
    this.updatedAt = new Date();
  }

  /**
   * 生成UUID v4
   * @private
   */
  private uuidv4(): string {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
      const r = Math.random() * 16 | 0;
      const v = c === 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }
}
```

#### 3.2 用户模块实体

```typescript
// src/modules/user/entities/user.entity.ts
import { Entity, Column, Index, OneToMany, ManyToMany, JoinTable } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { UserStatus, MemberLevel, PrivacyLevel } from '@/common/enums/user.enum';
import { Order } from '@/modules/order/entities/order.entity';
import { UserAddress } from './user-address.entity';
import { UserDevice } from './user-device.entity';
import { UserPrivacySettings } from './user-privacy.entity';

/**
 * 用户实体
 */
@Entity('users')
export class User extends BaseEntity {
  // ==================== 账号信息 ====================

  @Column({ type: 'varchar', length: 100, unique: true })
  email: string;

  @Column({ type: 'varchar', length: 20, unique: true, nullable: true })
  phone?: string;

  @Column({ type: 'varchar', length: 255, nullable: false })
  passwordHash: string;

  @Column({ type: 'varchar', length: 50 })
  nickname: string;

  @Column({ type: 'varchar', length: 500, nullable: true })
  avatarUrl?: string;

  // ==================== 个人信息 ====================

  @Column({ type: 'varchar', length: 10, nullable: true })
  gender?: 'male' | 'female' | 'other';

  @Column({ type: 'date', nullable: true })
  birthDate?: Date;

  @Column({ type: 'varchar', length: 100, nullable: true })
  realName?: string;

  @Column({ type: 'varchar', length: 200, nullable: true })
  idCardNumber?: string;

  // ==================== 隐私设置 ====================

  @Column({
    type: 'enum',
    enum: PrivacyLevel,
    default: PrivacyLevel.STANDARD
  })
  privacyLevel: PrivacyLevel;

  @Column({ type: 'boolean', default: true })
  privacyModeEnabled: boolean;

  @Column({ type: 'boolean', default: false })
  stealthModeEnabled: boolean;

  @Column({ type: 'boolean', default: false })
  biometricEnabled: boolean;

  // ==================== 账户状态 ====================

  @Column({
    type: 'enum',
    enum: UserStatus,
    default: UserStatus.ACTIVE
  })
  status: UserStatus;

  @Column({ type: 'boolean', default: false })
  emailVerified: boolean;

  @Column({ type: 'boolean', default: false })
  phoneVerified: boolean;

  @Column({ type: 'timestamp with time zone', nullable: true })
  lastLoginAt?: Date;

  @Column({ type: 'varchar', length: 45, nullable: true })
  lastLoginIp?: string;

  // ==================== 会员信息 ====================

  @Column({
    type: 'enum',
    enum: MemberLevel,
    default: MemberLevel.REGULAR
  })
  memberLevel: MemberLevel;

  @Column({ type: 'timestamp with time zone', nullable: true })
  memberExpireAt?: Date;

  @Column({ type: 'integer', default: 0 })
  pointsBalance: number;

  // ==================== 关联关系 ====================

  @OneToMany(() => UserAddress, 'user', { cascade: true })
  addresses: UserAddress[];

  @OneToMany(() => UserDevice, 'user', { cascade: true })
  devices: UserDevice[];

  @OneToMany(() => Order, 'user', { cascade: true })
  orders: Order[];

  @OneToMany(() => UserPrivacySettings, 'user', { cascade: true })
  privacySettings: UserPrivacySettings[];

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'varchar', length: 20 })
  memberLevel: MemberLevel;

  @Index()
  @Column({ type: 'enum', enum: UserStatus })
  status: UserStatus;
}
```

```typescript
// src/modules/user/entities/user-privacy.entity.ts
import { Entity, Column, PrimaryColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';

/**
 * 用户隐私设置实体
 */
@Entity('user_privacy_settings')
export class UserPrivacySettings extends BaseEntity {
  @Column({ type: 'varchar', length: 32, unique: true })
  userId: string;

  // ==================== 隐私等级配置 ====================

  @Column({
    type: 'enum',
    enum: PrivacyLevel,
    default: PrivacyLevel.STANDARD
  })
  privacyLevel: PrivacyLevel;

  // ==================== 标准模式配置 ====================

  @Column({ type: 'jsonb', default: {} })
  standardConfig: {
    avatarVisible: true;
    nicknameVisible: true;
    bioVisible: true;
    showOnlineStatus: true;
    showViewHistory: true;
  };

  // ==================== 隐身模式配置 ====================

  @Column({ type: 'jsonb', default: {} })
  stealthConfig: {
    avatarBlur: boolean;
    nicknameMasked: boolean;
    hideOnlineStatus: boolean;
    hideViewHistory: boolean;
    hideLastActive: boolean;
  };

  // ==================== 伪装模式配置 ====================

  @Column({ type: 'jsonb', default: {} })
  disguiseConfig: {
    useVirtualAddress: boolean;
    usePickupService: boolean;
    useDisguiseSender: boolean;
    useDisguiseNote: boolean;
  };

  // ==================== 虚拟信息缓存 ====================

  @Column({ type: 'jsonb', default: {} })
  virtualInfo: {
    virtualReceiverName?: string;
    virtualPhone?: string;
    pickupPointId?: string;
    pickupCode?: string;
    pickupExpiresAt?: string;
  };
}
```

#### 3.3 商品模块实体

```typescript
// src/modules/product/entities/product.entity.ts
import { Entity, Column, Index, OneToMany, ManyToOne, JoinColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { ProductStatus, ProductCategoryCode } from '@/common/enums/product.enum';
import { ProductSku } from './product-sku.entity';
import { Category } from './category.entity';

/**
 * 商品实体
 */
@Entity('products')
export class Product extends BaseEntity {
  // ==================== 基本信息 ====================

  @Column({ type: 'varchar', length: 32 })
  categoryId: string;

  @Column({ type: 'varchar', length: 50, unique: true })
  sku: string;

  @Column({ type: 'varchar', length: 200 })
  name: string;

  @Column({ type: 'varchar', length: 200, unique: true })
  slug: string;

  @Column({ type: 'varchar', length: 500 })
  shortDesc: string;

  @Column({ type: 'text' })
  description: string;

  // ==================== 图片 ====================

  @Column({ type: 'varchar', length: 500 })
  mainImage: string;

  @Column({ type: 'jsonb', default: '[]' })
  images: string[];

  // ==================== 价格信息 ====================

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: false })
  price: number;

  @Column({ type: 'decimal', precision: 10, scale: 2 })
  originalPrice?: number;

  @Column({ type: 'decimal', precision: 10, scale: 2 })
  costPrice?: number;

  // ==================== 库存信息 ====================

  @Column({ type: 'integer', default: 0 })
  stock: number;

  @Column({ type: 'integer', default: 10 })
  stockWarning: number;

  // ==================== 商品属性 ====================

  @Column({ type: 'varchar', length: 100 })
  brand?: string;

  @Column({ type: 'varchar', length: 100 })
  material?: string;

  @Column({ type: 'varchar', length: 50 })
  size?: string;

  @Column({ type: 'varchar', length: 50 })
  color?: string;

  @Column({ type: 'decimal', precision: 8, scale: 2 })
  weight?: number;

  // ==================== 商品标签 ====================

  @Column({ type: 'jsonb', default: '[]' })
  tags: string[];

  @Column({ type: 'boolean', default: false })
  isNew: boolean;

  @Column({ type: 'boolean', default: false })
  isHot: boolean;

  @Column({ type: 'boolean', default: false })
  isRecommended: boolean;

  // ==================== 销售信息 ====================

  @Column({ type: 'integer', default: 0 })
  salesCount: number;

  @Column({ type: 'integer', default: 0 })
  viewCount: number;

  @Column({ type: 'integer', default: 0 })
  favoriteCount: number;

  @Column({ type: 'decimal', precision: 3, scale: 2, default: 0 })
  ratingAvg: number;

  @Column({ type: 'integer', default: 0 })
  reviewCount: number;

  // ==================== 状态 ====================

  @Column({
    type: 'enum',
    enum: ProductStatus,
    default: ProductStatus.DRAFT
  })
  status: ProductStatus;

  @Column({ type: 'boolean', default: true })
  isActive: boolean;

  @Column({ type: 'timestamp with time zone', nullable: true })
  publishedAt?: Date;

  // ==================== SEO ====================

  @Column({ type: 'varchar', length: 200 })
  metaTitle?: string;

  @Column({ type: 'varchar', length: 500' })
  metaDescription?: string;

  // ==================== 关联关系 ====================

  @ManyToOne(() => Category, { onDelete: 'RESTRICT' })
  @JoinColumn({ name: 'categoryId' })
  category: Category;

  @OneToMany(() => ProductSku, 'product', { cascade: true })
  skus: ProductSku[];

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'enum', enum: ProductStatus })
  status: ProductStatus;

  @Index()
  @Column({ type: 'boolean' })
  isActive: boolean;

  @Index()
  @Column({ type: 'integer' })
  salesCount: number;

  @Index()
  @Column({ type: 'integer' })
  viewCount: number;

  @Index()
  @Column({ type: 'decimal', precision: 3, scale: 2 })
  ratingAvg: number;
}
```

```typescript
// src/modules/product/entities/product-sku.entity.ts
import { Entity, Column, Index, ManyToOne, JoinColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';

/**
 * 商品SKU实体
 */
@Entity('product_skus')
export class ProductSku extends BaseEntity {
  @Column({ type: 'varchar', length: 32 })
  productId: string;

  @Column({ type: 'varchar', length: 50, unique: true })
  skuCode: string;

  @Column({ type: 'varchar', length: 200 })
  specName: string;

  @Column({ type: 'decimal', precision: 10, scale: 2 })
  price: number;

  @Column({ type: 'integer', default: 0 })
  stock: number;

  @Column({ type: 'jsonb', default: '{}' })
  specAttributes: Record<string, string>;

  @Column({ type: 'boolean', default: true })
  isActive: boolean;

  // ==================== 关联关系 ====================

  @ManyToOne(() => Product, { onDelete: 'CASCADE' })
  @JoinColumn({ name: 'productId' })
  product: Product;

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'boolean' })
  isActive: boolean;

  @Index()
  @Column({ type: 'integer' })
  stock: number;
}
```

#### 3.4 订单模块实体

```typescript
// src/modules/order/entities/order.entity.ts
import { Entity, Column, Index, OneToMany, ManyToOne, JoinTable } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { OrderStatus, PaymentStatus, ShippingStatus, OrderSecurityLevel } from '@/common/enums/order.enum';
import { OrderItem } from './order-item.entity';
import { User } from '@/modules/user/entities/user.entity';

/**
 * 订单实体
 */
@Entity('orders')
export class Order extends BaseEntity {
  // ==================== 基本信息 ====================

  @Column({ type: 'varchar', length: 32 })
  userId: string;

  @Column({ type: 'varchar', length: 50, unique: true })
  orderNo: string;

  // ==================== 金额信息 ====================

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: false })
  totalAmount: number;

  @Column({ type: 'decimal', precision: 10, scale: 2, default: 0 })
  discountAmount: number;

  @Column({ type: 'decimal', precision: 10, scale: 2, default: 0 })
  shippingAmount: number;

  @Column({ type: 'decimal', precision: 10, scale: 2, nullable: false })
  payableAmount: number;

  @Column({ type: 'decimal', precision: 10, scale: 2, default: 0 })
  paidAmount: number;

  // ==================== 商品信息摘要 ====================

  @Column({ type: 'jsonb' })
  productSummary: {
    items: Array<{
      productId: string;
      productName: string;
      productImage: string;
      skuCode: string;
      specName: string;
      quantity: number;
      unitPrice: number;
    }>;
  };

  // ==================== 收货信息 ====================

  @Column({ type: 'varchar', length: 50 })
  receiverName: string;

  @Column({ type: 'varchar', length: 20 })
  receiverPhone: string;

  @Column({ type: 'varchar', length: 500 })
  receiverAddress: string;

  // ==================== 状态 ====================

  @Column({
    type: 'enum',
    enum: OrderStatus,
    default: OrderStatus.PENDING
  })
  status: OrderStatus;

  @Column({
    type: 'enum',
    enum: PaymentStatus,
    default: PaymentStatus.UNPAID
  })
  paymentStatus: PaymentStatus;

  @Column({
    type: 'enum',
    enum: ShippingStatus,
    default: ShippingStatus.UNSHIPPED
  })
  shippingStatus: ShippingStatus;

  @Column({
    type: 'enum',
    enum: OrderSecurityLevel,
    default: OrderSecurityLevel.NORMAL
  })
  securityLevel: OrderSecurityLevel;

  // ==================== 时间记录 ====================

  @Column({ type: 'timestamp with time zone', nullable: true })
  paidAt?: Date;

  @Column({ type: 'timestamp with time zone', nullable: true })
  shippedAt?: Date;

  @Column({ type: 'timestamp with time zone', nullable: true })
  completedAt?: Date;

  @Column({ type: 'timestamp with time zone', nullable: true })
  cancelledAt?: Date;

  // ==================== 备注 ====================

  @Column({ type: 'varchar', length: 500 })
  userRemark?: string;

  @Column({ type: 'text' })
  adminRemark?: string;

  // ==================== 关联关系 ====================

  @ManyToOne(() => User, { onDelete: 'RESTRICT' })
  @JoinColumn({ name: 'userId' })
  user: User;

  @OneToMany(() => OrderItem, 'order', { cascade: true })
  items: OrderItem[];

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'enum', enum: OrderStatus })
  status: OrderStatus;

  @Index()
  @Column({ type: 'enum', enum: PaymentStatus })
  paymentStatus: PaymentStatus;

  @Index()
  @Column({ type: 'enum', enum: OrderSecurityLevel })
  securityLevel: OrderSecurityLevel;

  @Index()
  @Column({ type: 'timestamp with time zone' })
  createdAt: number;
}
```

#### 3.5 AI模块实体

```typescript
// src/modules/ai/entities/conversation.entity.ts
import { Entity, Column, Index, OneToMany, ManyToOne, JoinColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { ConversationCategory, AIPersonality } from '@/common/enums/ai.enum';
import { AIMessage } from './message.entity';

/**
 * AI对话会话实体
 */
@Entity('ai_conversations')
export class AIConversation extends BaseEntity {
  @Column({ type: 'varchar', length: 32 })
  userId: string;

  // ==================== 会话信息 ====================

  @Column({ type: 'varchar', length: 200 })
  title?: string;

  @Column({
    type: 'enum',
    enum: ConversationCategory,
    default: ConversationCategory.GENERAL
  })
  category: ConversationCategory;

  // ==================== AI配置 ====================

  @Column({
    type: 'enum',
    enum: AIPersonality,
    default: AIPersonality.GENTLE
  })
  aiPersonality: AIPersonality;

  @Column({ type: 'decimal', precision: 3, scale: 2, default: 0.7 })
  temperature: number;

  @Column({ type: 'integer', default: 1000 })
  maxTokens: number;

  // ==================== 统计 ====================

  @Column({ type: 'integer', default: 0 })
  messageCount: number;

  @Column({ type: 'timestamp with time zone', nullable: true })
  lastMessageAt?: Date;

  // ==================== 关联关系 ====================

  @ManyToOne(() => User, { onDelete: 'CASCADE' })
  @JoinColumn({ name: 'userId' })
  user: User;

  @OneToMany(() => AIMessage, 'conversation', { cascade: true })
  messages: AIMessage[];

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'timestamp with time zone' })
  lastMessageAt: number;
}

/**
 * AI消息实体
 */
@Entity('ai_messages')
export class AIMessage extends BaseEntity {
  @Column({ type: 'varchar', length: 32 })
  conversationId: string;

  // ==================== 消息信息 ====================

  @Column({
    type: 'enum',
    enum: ['user', 'assistant', 'system'],
    default: 'user'
  })
  role: 'user' | 'assistant' | 'system';

  @Column({ type: 'text', nullable: false })
  content: string;

  @Column({
    type: 'enum',
    enum: ['text', 'image', 'audio', 'file'],
    default: 'text'
  })
  contentType: 'text' | 'image' | 'audio' | 'file';

  // ==================== 元数据 ====================

  @Column({ type: 'jsonb', default: '{}' })
  metadata: {
    tokens?: number;
    model?: string;
    latency?: number;
    imageAnalysis?: any;
    audioTranscript?: string;
  };

  // ==================== 关联关系 ====================

  @ManyToOne(() => AIConversation, { onDelete: 'CASCADE' })
  @JoinColumn({ name: 'conversationId' })
  conversation: AIConversation;

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'timestamp with time zone' })
  createdAt: number;
}
```

#### 3.6 IoT模块实体

```typescript
// src/modules/iot/entities/device.entity.ts
import { Entity, Column, Index, ManyToOne, JoinColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { IoTDeviceType, IoTDeviceStatus } from '@/common/enums/iot.enum';
import { User } from '@/modules/user/entities/user.entity';

/**
 * IoT设备实体
 */
@Entity('iot_devices')
export class IoTDevice extends BaseEntity {
  @Column({ type: 'varchar', length: 32 })
  userId?: string;

  // ==================== 设备信息 ====================

  @Column({ type: 'varchar', length: 100, unique: true, nullable: false })
  deviceId: string;

  @Column({
    type: 'enum',
    enum: IoTDeviceType,
    nullable: false
  })
  deviceType: IoTDeviceType;

  @Column({ type: 'varchar', length: 100 })
  deviceName?: string;

  @Column({ type: 'varchar', length: 50 })
  brand?: string;

  @Column({ type: 'varchar', length: 50 })
  model?: string;

  // ==================== 连接信息 ====================

  @Column({ type: 'varchar', length: 20 })
  bluetoothAddress?: string;

  @Column({ type: 'timestamp with time zone', nullable: true })
  lastConnectedAt?: Date;

  @Column({ type: 'integer', default: 0 })
  connectionCount: number;

  // ==================== 设备状态 ====================

  @Column({
    type: 'enum',
    enum: IoTDeviceStatus,
    default: IoTDeviceStatus.OFFLINE
  })
  status: IoTDeviceStatus;

  @Column({ type: 'integer', nullable: true })
  batteryLevel?: number;

  // ==================== 固件信息 ====================

  @Column({ type: 'varchar', length: 20 })
  firmwareVersion?: string;

  @Column({ type: 'varchar', length: 20 })
  hardwareVersion?: string;

  // ==================== 关联关系 ====================

  @ManyToOne(() => User, { onDelete: 'SET NULL', nullable: true })
  @JoinColumn({ name: 'userId' })
  user: User;

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'enum', enum: IoTDeviceStatus })
  status: IoTDeviceStatus;

  @Index()
  @Column({ type: 'varchar', length: 100 })
  deviceType: IoTDeviceType;

  @Index()
  @Column({ type: 'boolean' })
  isOnline: boolean;
}
```

#### 3.7 通知模块实体

```typescript
// src/modules/notification/entities/notification.entity.ts
import { Entity, Column, Index, ManyToOne, JoinColumn } from 'typeorm';
import { BaseEntity } from '@/common/entities/base.entity';
import { NotificationType, NotificationStatus } from '@/common/enums/notification.enum';
import { User } from '@/modules/user/entities/user.entity';

/**
 * 通知实体
 */
@Entity('notifications')
export class Notification extends BaseEntity {
  @Column({ type: 'varchar', length: 32 })
  userId: string;

  // ==================== 通知信息 ====================

  @Column({
    type: 'enum',
    enum: NotificationType
  })
  type: NotificationType;

  @Column({ type: 'varchar', length: 200' })
  title: string;

  @Column({ type: 'text' })
  content: string;

  @Column({ type: 'jsonb', default: '{}' })
  data: Record<string, any>;

  // ==================== 操作信息 ====================

  @Column({ type: 'varchar', length: 500', nullable: true })
  actionUrl?: string;

  @Column({ type: 'varchar', length: 100, nullable: true })
  actionText?: string;

  // ==================== 状态 ====================

  @Column({
    type: 'enum',
    enum: NotificationStatus,
    default: NotificationStatus.UNREAD
  })
  status: NotificationStatus;

  @Column({ type: 'timestamp with time zone', nullable: true })
  readAt?: Date;

  // ==================== 关联关系 ====================

  @ManyToOne(() => User, { onDelete: 'CASCADE' })
  @JoinColumn({ name: 'userId' })
  user: User;

  // ==================== 索引 ====================

  @Index()
  @Column({ type: 'enum', enum: NotificationStatus })
  status: NotificationStatus;

  @Index()
  @Column({ type: 'enum', enum: NotificationType })
  type: NotificationType;

  @Index()
  @Column({ type: 'timestamp with time zone' })
  createdAt: number;
}
```

---

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」
