---
@file: 095-后端-DTO类型定义.md
@description: HaiLan Pro 后端数据传输对象类型定义，包含请求DTO、响应DTO
@author: YanYuCloudCube Team
@version: v1.0.0
@created: 2026-01-26
@updated: 2026-01-26
@status: published
@tags: [HaiLan-Pro-类型定义],[]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 095 后端-DTO类型定义

## 概述

本文档详细描述HaiLan Pro-HaiLan-Pro-类型定义-后端-DTO类型定义相关内容，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范后端-DTO类型定义相关的业务标准与技术落地要求
- 为项目相关人员提供清晰的参考依据
- 保障相关模块开发、实施、运维的一致性与规范性

### 2. 设计原则

#### 2.1 五高原则
- **高可用性**：确保系统7x24小时稳定运行，支持PWA离线能力
- **高性能**：优化响应时间和处理能力，支持高并发访问
- **高安全性**：保护用户数据和隐私安全，双重加密机制
- **高扩展性**：支持业务快速扩展，微服务架构设计
- **高可维护性**：便于后续维护和升级，模块化设计

#### 2.2 五标体系
- **标准化**：统一的技术和流程标准
- **规范化**：严格的开发和管理规范
- **自动化**：提高开发效率和质量，CI/CD自动化
- **智能化**：利用AI技术提升能力，LLM智能顾问
- **可视化**：直观的监控和管理界面

#### 2.3 五化架构
- **流程化**：标准化的开发流程
- **文档化**：完善的文档体系
- **工具化**：高效的开发工具链
- **数字化**：数据驱动的决策
- **生态化**：开放的生态系统

### 3. 后端DTO类型定义

#### 3.1 用户模块DTO

```typescript
// src/modules/user/dto/user.dto.ts
import {
  IsString,
  IsEmail,
  IsOptional,
  IsEnum,
  MinLength,
  MaxLength,
  Matches,
  IsBoolean,
  IsDateString,
  IsInt,
  Min,
  Max,
  IsArray
} from 'class-validator';
import { ApiProperty, ApiPropertyOptional, ApiPropertyEnum, ApiPropertyDefault } from '@nestjs/swagger';

/**
 * 用户注册DTO
 */
export class RegisterDto {
  @ApiModelProperty({ description: '邮箱', example: 'user@example.com' })
  @IsNotEmpty({ message: '邮箱不能为空' })
  @IsEmail({}, { message: '邮箱格式不正确' })
  email: string;

  @ApiModelProperty({ description: '密码', example: 'Pass1234' })
  @IsNotEmpty({ message: '密码不能为空' })
  @MinLength(8, { message: '密码至少8位' })
  @Matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/, {
    message: '密码必须包含字母和数字'
  })
  password: string;

  @ApiModelProperty({ description: '确认密码' })
  @IsNotEmpty({ message: '请确认密码' })
  passwordConfirm: string;

  @ApiModelProperty({ description: '昵称', example: '海蓝用户' })
  @IsOptional()
  @MaxLength(50, { message: '昵称不能超过50个字符' })
  @Matches(/^[\u4e00-\u9fa5a-zA-Z0-9_]{2,20}$/, {
    message: '昵称应为2-20位中英文数字下划线'
  })
  nickname?: string;

  @ApiModelProperty({ description: '邮箱验证码', example: '123456' })
  @IsNotEmpty({ message: '验证码不能为空' })
  @IsString()
  @Length(6, 6, { message: '验证码应为6位' })
  verificationCode: string;
}

/**
 * 用户登录DTO
 */
export class LoginDto {
  @ApiModelProperty({ description: '账号（邮箱或手机号）', example: 'user@example.com' })
  @IsNotEmpty({ message: '账号不能为空' })
  account: string;

  @ApiModelProperty({ description: '密码', example: 'Pass1234' })
  @IsNotEmpty({ message: '密码不能为空' })
  @IsString()
  password: string;

  @ApiModelProperty({ description: '图形验证码', example: 'abcd' })
  @IsOptional()
  @IsString()
  captchaCode?: string;
}

/**
 * 更新用户信息DTO
 */
export class UpdateUserDto {
  @ApiModelProperty({ description: '昵称' })
  @IsOptional()
  @MaxLength(50)
  nickname?: string;

  @ApiModelProperty({ description: '头像URL' })
  @IsOptional()
  @IsUrl({}, { message: '头像URL格式不正确' })
  avatarUrl?: string;

  @ApiModelProperty({ description: '性别' })
  @IsOptional()
  @IsEnum(['male', 'female', 'other'])
  gender?: 'male' | 'female' | 'other';

  @ApiModelProperty({ description: '生日' })
  @IsOptional()
  @IsDateString()
  birthDate?: string;
}

/**
 * 修改密码DTO
 */
export class ChangePasswordDto {
  @ApiModelProperty({ description: '当前密码' })
  @IsNotEmpty({ message: '当前密码不能为空' })
  currentPassword: string;

  @ApiModelProperty({ description: '新密码' })
  @IsNotEmpty({ message: '新密码不能为空' })
  @MinLength(8, { message: '新密码至少8位' })
  @Matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/, {
    message: '新密码必须包含字母和数字'
  })
  newPassword: string;

  @ApiModelProperty({ description: '确认新密码' })
  @IsNotEmpty({ message: '请确认新密码' })
  @IsString()
  newPasswordConfirm: string;
}
```

#### 3.2 商品模块DTO

```typescript
// src/modules/product/dto/product.dto.ts
import { Type } from 'class-transformer';
import { IsEnum, IsOptional, IsString, IsNumber, IsBoolean, IsArray, Min, Max } from 'class-validator';
import { ApiProperty, ApiPropertyOptional, ApiPropertyEnum } from '@nestjs/swagger';
import { ProductCategoryCode } from '@/common/enums/product.enum';

/**
 * 创建商品DTO
 */
export class CreateProductDto {
  @ApiModelProperty({ description: '分类代码', enum: ProductCategoryCode })
  @IsEnum(ProductCategoryCode)
  categoryId: string;

  @ApiModelProperty({ description: 'SKU编号' })
  @IsString()
  @IsNotEmpty()
  sku: string;

  @ApiModelProperty({ description: '商品名称' })
  @IsString()
  @IsNotEmpty()
  @MaxLength(200)
  name: string;

  @ApiModelProperty({ description: 'URL友好名称' })
  @IsString()
  @IsNotEmpty()
  @MaxLength(200)
  slug: string;

  @ApiModelProperty({ description: '简短描述' })
  @IsOptional()
  @MaxLength(500)
  shortDesc?: string;

  @ApiModelProperty({ description: '详细描述' })
  @IsOptional()
  description?: string;

  @ApiModelProperty({ description: '主图' })
  @IsUrl()
  mainImage: string;

  @ApiModelProperty({ description: '图片列表' })
  @IsArray()
  @IsString()
  images: string[];

  @ApiModelProperty({ description: '价格' })
  @IsNumber()
  @Min(0)
  price: number;

  @ApiModelProperty({ description: '原价' })
  @IsOptional()
  @IsNumber()
  @Min(0)
  originalPrice?: number;

  @ApiModelProperty({ description: '成本价' })
  @IsOptional()
  @IsNumber()
  @Min(0)
  costPrice?: number;

  @ApiModelProperty({ description: '库存' })
  @IsInt()
  @Min(0)
  stock: number;

  @ApiModelProperty({ description: '库存预警' })
  @IsOptional()
  @IsInt()
  @Min(0)
  stockWarning?: number;

  @ApiModelProperty({ description: '品牌' })
  @IsOptional()
  @IsString()
  brand?: string;

  @ApiModelProperty({ description: '材质' })
  @IsOptional()
  @IsString()
  material?: string;

  @ApiModelProperty({ description: '尺寸' })
  @IsOptional()
  @IsString()
  size?: string;

  @ApiModelProperty({ description: '颜色' })
  @IsOptional()
  @IsString()
  color?: string;

  @ApiModelProperty({ description: '重量（克）' })
  @IsOptional()
  @IsNumber()
  weight?: number;

  @ApiModelProperty({ description: '标签' })
  @IsArray()
  @IsString()
  tags?: string[];

  @ApiModelProperty({ description: '是否新品' })
  @IsBoolean()
  @ApiModelPropertyDefault(false)
  isNew: boolean;

  @ApiModelProperty({ description: '是否热销' })
  @IsBoolean()
  @ApiModelPropertyDefault(false)
  isHot: boolean;

  @ApiModelProperty({ description: '是否推荐' })
  @IsBoolean()
  @ApiModelPropertyDefault(false)
  isRecommended: boolean;

  @ApiModelProperty({ description: '是否上架' })
  @IsBoolean()
  @ApiModelPropertyDefault(true)
  isActive: boolean;
}

/**
 * 更新商品DTO
 */
export class UpdateProductDto {
  @ApiModelProperty({ description: '商品名称' })
  @IsOptional()
  @MaxLength(200)
  name?: string;

  @ApiModelProperty({ description: '简短描述' })
  @IsOptional()
  @MaxLength(500)
  shortDesc?: string;

  @ApiModelProperty({ description: '详细描述' })
  @IsOptional()
  description?: string;

  @ApiModelProperty({ description: '主图' })
  @IsOptional()
  @IsUrl()
  mainImage?: string;

  @ApiModelProperty({ description: '图片列表' })
  @IsOptional()
  @IsArray()
  @IsString()
  images?: string[];

  @ApiModelProperty({ description: '价格' })
  @IsOptional()
  @IsNumber()
  @Min(0)
  price?: number;

  @ApiModelProperty({ description: '库存' })
  @IsOptional()
  @IsInt()
  @Min(0)
  stock?: number;

  @ApiModelProperty({ description: '标签' })
  @IsOptional()
  @IsArray()
  @IsString()
  tags?: string[];

  @ApiModelProperty({ description: '状态' })
  @IsOptional()
  @IsEnum(['draft', 'published', 'discontinued'])
  status?: 'draft' | 'published' | 'discontinued';

  @ApiModelProperty({ description: '是否上架' })
  @IsOptional()
  isActive?: boolean;
}

/**
 * 商品查询DTO
 */
export class QueryProductDto {
  @ApiModelProperty({ description: '分类代码' })
  @IsEnum(ProductCategoryCode)
  @IsOptional()
  category?: ProductCategoryCode;

  @ApiModelProperty({ description: '关键词搜索' })
  @IsOptional()
  @IsString()
  keyword?: string;

  @ApiModelProperty({ description: '最低价格' })
  @IsOptional()
  @IsNumber()
  @Min(0)
  minPrice?: number;

  @ApiModelProperty({ description: '最高价格' })
  @IsOptional()
  @IsNumber()
  @Max(999999)
  maxPrice?: number;

  @ApiModelProperty({ description: '是否有库存' })
  @IsOptional()
  @IsBoolean()
  inStock?: boolean;

  @ApiModelProperty({ description: '页码' })
  @IsInt()
  @Min(1)
  @IsOptional()
  page?: number;

  @ApiModelProperty({ description: '每页数量' })
  @IsInt()
  @Min(1)
  @Max(100)
  @IsOptional()
  pageSize?: number;

  @ApiModelProperty({ description: '排序字段' })
  @IsOptional()
  @IsEnum(['default', 'price_asc', 'price_desc', 'sales', 'rating'])
  sortBy?: 'default' | 'price_asc' | 'price_desc' | 'sales' | 'rating';

  @ApiModelProperty({ description: '排序方式' })
  @IsOptional()
  @IsEnum(['asc', 'desc'])
  sortOrder?: 'asc' | 'desc';
}
```

#### 3.3 订单模块DTO

```typescript
// src/modules/order/dto/order.dto.ts
import { Type } from 'class-transformer';
import { IsArray, IsEnum, IsNotEmpty, IsNumber, IsString, IsBoolean, ValidateNested } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

/**
 * 创建订单DTO
 */
export class CreateOrderDto {
  @ApiModelProperty({ description: '商品列表' })
  @IsArray()
  @IsNotEmpty()
  @Type(() => OrderItemDto)
  items: OrderItemDto[];

  @ApiModelProperty({ description: '收货地址ID' })
  @IsNotEmpty()
  addressId: string;

  @ApiModelProperty({ description: '用户备注' })
  @IsOptional()
  @MaxLength(500)
  remark?: string;

  @ApiModelProperty({ description: '是否使用积分' })
  @IsOptional()
  @IsBoolean()
  usePoints?: boolean;
}

/**
 * 订单项DTO
 */
export class OrderItemDto {
  @ApiModelProperty({ description: '商品ID' })
  @IsNotEmpty()
  productId: string;

  @ApiModelProperty({ description: 'SKU ID' })
  @IsOptional()
  skuId?: string;

  @ApiModelProperty({ description: '数量' })
  @IsNotEmpty()
  @IsInt()
  @Min(1)
  quantity: number;
}

/**
 * 更新订单状态DTO
 */
export class UpdateOrderStatusDto {
  @ApiModelProperty({ description: '订单状态' })
  @IsEnum(['pending', 'paid', 'shipped', 'completed', 'cancelled', 'refunding'])
  status: 'pending' | 'paid' | 'shipped' | 'completed' | 'cancelled' | 'refunding';
}

/**
 * 取消订单DTO
 */
export class CancelOrderDto {
  @ApiModelProperty({ description: '取消原因' })
  @IsOptional()
  @MaxLength(500)
  reason?: string;
}
```

#### 3.4 AI模块DTO

```typescript
// src/modules/ai/dto/ai.dto.ts
import { IsEnum, IsNotEmpty, IsNumber, IsString, IsOptional, MaxLength, IsArray } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';
import { ConversationCategory, AIPersonality } from '@/common/enums/ai.enum';

/**
 * 创建会话DTO
 */
export class CreateConversationDto {
  @ApiModelProperty({ description: '会话标题' })
  @IsOptional()
  @MaxLength(200)
  title?: string;

  @ApiModelProperty({ description: '会话类别' })
  @IsEnum(ConversationCategory)
  @IsNotEmpty()
  category: ConversationCategory;

  @ApiModelProperty({ description: 'AI人格' })
  @IsEnum(AIPersonality)
  @ApiModelPropertyDefault(AIPersonality.GENTLE)
  @IsOptional()
  aiPersonality?: AIPersonality;

  @ApiModelProperty({ description: '温度参数 (0-2)' })
  @IsNumber()
  @Min(0)
  @Max(2)
  @ApiModelPropertyDefault(0.7)
  @IsOptional()
  temperature?: number;

  @ApiModelProperty({ description: '最大Token数' })
  @IsNumber()
  @Min(100)
  @Max(4000)
  @ApiModelPropertyDefault(1000)
  @IsOptional()
  maxTokens?: number;
}

/**
 * 发送消息DTO
 */
export class SendMessageDto {
  @ApiModelProperty({ description: '消息内容' })
  @IsNotEmpty()
  @IsString()
  @MaxLength(2000)
  content: string;

  @ApiModelProperty({ description: '内容类型' })
  @IsEnum(['text', 'image'])
  @IsDefault('text')
  contentType?: 'text' | 'image';

  @ApiModelProperty({ description: '图片URL（contentType为image时必填）' })
  @IsOptional()
  imageUrl?: string;
}

/**
 * 流式消息响应DTO
 */
export class StreamMessageDto {
  @ApiModelProperty({ description: '消息内容' })
  content: string;

  @ApiModelProperty({ description: '是否完成' })
  done: boolean;
}
```

#### 3.5 IoT模块DTO

```typescript
// src/modules/iot/dto/device.dto.ts
import { IsEnum, IsNotEmpty, IsString, IsOptional, IsNumber } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';
import { IoTDeviceType } from '@/common/enums/iot.enum';

/**
 * 连接设备DTO
 */
export class ConnectDeviceDto {
  @ApiModelProperty({ description: '设备ID（蓝牙MAC）' })
  @IsNotEmpty()
  deviceId: string;

  @ApiModelProperty({ description: '服务UUID' })
  @IsOptional()
  @IsString()
  serviceUUID?: string;

  @ApiModelProperty({ description: '特征UUID' })
  @IsOptional()
  @IsString()
  characteristicUUID?: string;

  @ApiModelProperty({ description: '连接超时（毫秒）' })
  @IsNumber()
  @Min(1000)
  @Max(30000)
  @ApiModelPropertyDefault(10000)
  timeout?: number;
}

/**
 * 设备命令DTO
 */
export class DeviceCommandDto {
  @ApiModelProperty({ description: '命令类型' })
  @IsEnum(['power', 'mode', 'intensity', 'speed', 'pattern', 'custom'])
  type: 'power' | 'mode' | 'intensity' | 'speed' | 'pattern' | 'custom';

  @ApiModelProperty({ description: '命令值' })
  value: number | string | object;

  @ApiModelProperty({ description: '命令参数' })
  @IsOptional()
  params?: Record<string, any>;
}

/**
 * 模式设置DTO
 */
export class ModeSettingDto {
  @ApiModelProperty({ description: '模式值' })
  value: number;

  @ApiModelProperty({ description: '模式名称' })
  label: string;

  @ApiModelProperty({ description: '图标' })
  icon?: string;

  @ApiModelProperty({ description: '描述' })
  description?: string;
}

/**
 * 控制参数DTO
 */
export class ControlParamDto {
  @ApiModelProperty({ description: '参数名称' })
  name: string;

  @ApiModelProperty({ description: '参数类型' })
  type: 'range' | 'select' | 'boolean';

  @ApiModelProperty({ description: '最小值' })
  min?: number;

  @ApiModelProperty({ description: '最大值' })
  max?: number;

  @ApiModelProperty({ description: '步长' })
  step?: number;

  @ApiModelProperty({ description: '选项列表' })
  options?: Array<{ value: number; label: string }>;

  @ApiModelProperty({ description: '单位' })
  unit?: string;

  @ApiModelProperty({ description: '默认值' })
  defaultValue?: number;
}
```

#### 3.6 通知模块DTO

```typescript
// src/modules/notification/dto/notification.dto.ts
import { IsEnum, IsNotEmpty, IsString, MaxLength } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';
import { NotificationType, NotificationStatus } from '@/common/enums/notification.enum';

/**
 * 创建通知DTO
 */
export class CreateNotificationDto {
  @ApiModelProperty({ description: '通知类型' })
  @IsEnum(NotificationType)
  type: NotificationType;

  @ApiModelProperty({ description: '接收用户ID列表' })
  @IsArray()
  @IsNotEmpty()
  userIds: string[];

  @ApiModelProperty({ description: '标题' })
  @IsNotEmpty()
  @MaxLength(200)
  title: string;

  @ApiModelProperty({ description: '内容' })
  @IsNotEmpty()
  @MaxLength(500)
  content: string;

  @ApiModelProperty({ description: '数据' })
  @IsOptional()
  data?: Record<string, any>;

  @ApiModelProperty({ description: '操作链接' })
  @IsOptional()
  @MaxLength(500)
  actionUrl?: string;

  @ApiModelProperty({ description: '操作文字' })
  @IsOptional()
  @MaxLength(100)
  actionText?: string;
}

/**
 * 标记已读DTO
 */
export class MarkAsReadDto {
  @ApiModelProperty({ description: '通知ID列表' })
  @IsArray()
  @IsNotEmpty()
  notificationIds: string[];
}

/**
 * 批量标记已读DTO
 */
export class MarkAllAsReadDto {
  @ApiModelProperty({ description: '用户ID' })
  @IsNotEmpty()
  userId: string;

  @ApiModelProperty({ description: '通知类型' })
  @IsOptional()
  type?: NotificationType;

  @ApiModelProperty({ description: '标记时间戳（只标记此时间之前的）' })
  @IsOptional()
  before?: Date;
}

/**
 * 删除通知DTO
 */
export class DeleteNotificationDto {
  @ApiModelProperty({ description: '通知ID列表' })
  @IsArray()
  @IsNotEmpty()
  notificationIds: string[];
}
```

#### 3.7 分页查询参数DTO

```typescript
// src/common/dto/pagination.dto.ts
import { Type } from 'class-transformer';
import { IsEnum, IsNumber, IsOptional, IsInt, Min, Max, Default } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

/**
 * 分页查询DTO
 * 所有列表查询接口应继承此DTO
 */
export class PaginatedQueryDto {
  @ApiModelProperty({ description: '页码（从1开始）', example: 1 })
  @IsOptional()
  @Type(() => Number)
  @Min(1)
  @Default(1)
  page?: number;

  @ApiModelProperty({ description: '每页数量', example: 20 })
  @IsOptional()
  @Type(() => Number)
  @Min(1)
  @Max(100)
  @Default(20)
  pageSize?: number;

  @ApiModelProperty({ description: '排序字段' })
  @IsOptional()
  sortBy?: string;

  @ApiModelProperty({ description: '排序方式' })
  @IsOptional()
  @IsEnum(['asc', 'desc'])
  sortOrder?: 'asc' | 'desc';
}

/**
 * 分页响应DTO
 */
export class PaginatedResponseDto<T> {
  @ApiModelProperty({ description: '数据列表' })
  items: T[];

  @ApiModelProperty({ description: '总数' })
  total: number;

  @ApiModelProperty({ description: '当前页' })
  page: number;

  @ApiModelProperty({ description: '每页数量' })
  pageSize: number;

  @ApiModelProperty({ description: '总页数' })
  totalPages: number;

  @ApiModelProperty({ description: '是否有下一页' })
  hasNext: boolean;

  @ApiModelProperty({ description: '是否有上一页' })
  hasPrev: boolean;
}

/**
 * 分页元数据
 */
export class PaginationMeta {
  @ApiModelProperty({ description: '当前页' })
  page: number;

  @ApiModelProperty({ description: '每页数量' })
  pageSize: number;

  @ApiModelProperty({ description: '总数' })
  total: number;

  @ApiModelProperty({ description: '总页数' })
  totalPages: number;

  @ApiModelProperty({ description: '是否有下一页' })
  hasNext: boolean;

  @ApiModelProperty({ description: '是否有上一页' })
  hasPrev: boolean;
}
```

#### 3.8 安全验证DTO

```typescript
// src/modules/auth/dto/auth.dto.ts
import { IsEnum, IsNotEmpty, IsString, Matches } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

/**
 * 验证码验证DTO
 */
export class VerifyCodeDto {
  @ApiModelProperty({ description: '账号（邮箱或手机号）' })
  @IsNotEmpty()
  account: string;

  @ApiModelProperty({ description: '验证码' })
  @IsNotEmpty()
  @IsString()
  @Length(6, 6)
  code: string;

  @ApiModelProperty({ description: '验证码类型' })
  @IsEnum(['register', 'login', 'reset_password', 'bind_phone', 'bind_email'])
  type: string;
}

/**
 * 刷新令牌DTO
 */
export class RefreshTokenDto {
  @ApiModelProperty({ description: '刷新令牌' })
  @IsNotEmpty()
  refreshToken: string;
}

/**
 * 令牌响应DTO
 */
export class TokenResponseDto {
  @ApiModelProperty({ description: '访问令牌' })
  accessToken: string;

  @ApiModelProperty({ description: '刷新令牌' })
  refreshToken: string;

  @ApiModelProperty({ description: '令牌类型' })
  tokenType: string;

  @ApiModelProperty({ description: '过期时间（秒）' })
  expiresIn: number;
}
```

#### 3.9 图片上传DTO

```typescript
// src/common/dto/upload.dto.ts
import { IsEnum, IsNotEmpty, IsNumber, IsString, MaxLength } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

/**
 * 上传文件DTO
 */
export class UploadFileDto {
  @ApiModelProperty({ description: '文件' })
  @IsNotEmpty()
  file: Express.Multer.File;

  @ApiModelProperty({ description: '文件类型' })
  @IsEnum(['image', 'video', 'document'])
  type: 'image' | 'video' | 'document';
}

/**
 * 上传图片结果DTO
 */
export class UploadImageResultDto {
  @ApiModelProperty({ description: '图片URL' })
  url: string;

  @ApiModelProperty({ description: '文件名' })
  filename: string;

  @ApiModelProperty({ description: '文件大小（字节）' })
  size: number;

  @ApiModelProperty({ description: '图片宽度' })
  width: number;

  @ApiModelProperty({ description: '图片高度' })
  height: number;
}

/**
 * 批量上传结果DTO
 */
export class BatchUploadResultDto {
  @ApiModelProperty({ description: '成功数量' })
  success: number;

  @ApiModelProperty({ description: '失败数量' })
  failed: number;

  @ApiModelProperty({ description: '失败详情' })
  errors: Array<{
    filename: string;
    error: string;
  }>;
}
```

#### 3.10 数据库同步DTO

```typescript
// src/common/dto/sync.dto.ts
import { IsEnum, IsNotEmpty, IsString, MaxLength } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

/**
 * 数据同步DTO
 */
export class DataSyncDto {
  @ApiModelProperty({ description: '同步类型' })
  @IsEnum(['full', 'incremental', 'realtime'])
  type: 'full' | 'incremental' | 'realtime';

  @ApiModelProperty({ description: '同步表名' })
  @IsArray()
  @IsNotEmpty()
  tables: string[];

  @ApiModelProperty({ description: '同步数据' })
  data?: Record<string, any>;

  @ApiModelProperty({ description: '时间戳' })
  timestamp?: number;
}

/**
 * 数据同步结果DTO
 */
export class DataSyncResultDto {
  @ApiModelProperty({ description: '同步状态' })
  status: 'success' | 'partial' | 'failed';

  @ApiModelProperty({ description: '已同步表数量' })
  syncedTables: string[];

  @ApiModelProperty({ description: '错误信息' })
  errors?: Record<string, string>;
}
```

---

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」
