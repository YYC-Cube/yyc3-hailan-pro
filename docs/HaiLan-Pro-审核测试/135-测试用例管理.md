---
file: 135-测试用例管理.md
description: HaiLan Pro 测试用例管理规范，包含用例编写、用例管理、用例执行
author: YanYuCloudCube Team
version: v1.0.0
created: 2026-01-26
updated: 2026-01-26
status: published
tags:
  - HaiLan-Pro-审核测试,[]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 135 测试用例管理

## 概述

本文档详细描述HaiLan Pro-HaiLan-Pro-审核测试-测试用例管理相关内容，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范测试用例管理相关的业务标准与技术落地要求
- 为项目相关人员提供清晰的参考依据
- 保障相关模块开发、实施、运维的一致性与规范性

### 2. 设计原则

#### 2.1 五高原则
- **高可用性**：确保系统7x24小时稳定运行，支持PWA离线能力
- **高性能**：优化响应时间和处理能力，支持高并发访问
- **高安全性**：保护用户数据和隐私安全，双重加密机制
- **高扩展性**：支持业务快速扩展，微服务架构设计
- **高可维护性**：便于后续维护和升级，模块化设计

#### 2.2 五标体系
- **标准化**：统一的技术和流程标准
- **规范化**：严格的开发和管理规范
- **自动化**：提高开发效率和质量，CI/CD自动化
- **智能化**：利用AI技术提升能力，LLM智能顾问
- **可视化**：直观的监控和管理界面

#### 2.3 五化架构
- **流程化**：标准化的开发流程
- **文档化**：完善的文档体系
- **工具化**：高效的开发工具链
- **数字化**：数据驱动的决策
- **生态化**：开放的生态系统

### 3. 测试用例管理

#### 3.1 测试用例编写规范

```yaml
测试用例标准:

  必需字段:
    - 用例ID: TC-{模块}-{编号} (如: TC-AUTH-001)
    - 用例标题: 简洁描述测试目标
    - 优先级: P0(冒烟)/P1(高)/P2(中)/P3(低)
    - 前置条件: 执行前需满足的条件
    - 测试步骤: 详细操作步骤
    - 预期结果: 期望的输出/行为
    - 实际结果: 执行后的实际输出
    - 测试状态: 待执行/通过/失败/阻塞/跳过
    - 关联需求: 需求ID/功能点

  可选字段:
    - 测试类型: 功能/性能/安全/兼容性/易用性
    - 测试环境: 测试环境配置
    - 测试数据: 测试输入数据
    - 截图/录屏: 失败时附上
    - 备注: 特殊说明

  编写原则:
    - 独立性: 用例之间互不依赖
    - 可重复性: 可重复执行
    - 可维护性: 易于修改更新
    - 可读性: 清晰易懂
    - 完整性: 覆盖正常和异常场景
```

#### 3.2 测试用例模板

```markdown
## 测试用例模板

**用例ID**: TC-{MODULE}-{NUMBER}
**用例标题**: {简短描述}
**优先级**: P0/P1/P2/P3
**测试类型**: 功能/性能/安全/兼容性
**关联需求**: REQ-{NUMBER}

### 前置条件
1. 条件1
2. 条件2

### 测试步骤
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 操作描述 | 期望结果 |
| 2 | 操作描述 | 期望结果 |

### 测试数据
```
数据内容
```

### 预期结果
主预期结果描述

### 实际结果
(执行后填写)

### 测试状态
通过 / 失败 / 阻塞 / 跳过

### 备注
(如有特殊情况说明)
```

#### 3.3 测试用例示例

```markdown
## TC-AUTH-001 用户登录功能测试

**用例ID**: TC-AUTH-001
**用例标题**: 使用正确的邮箱和密码登录系统
**优先级**: P0
**测试类型**: 功能测试
**关联需求**: REQ-AUTH-001

### 前置条件
1. 系统已部署并可访问
2. 存在已注册用户: test@hailan.pro / password123
3. 用户账户状态正常（未锁定/未注销）

### 测试步骤
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 访问登录页面 /login | 显示登录表单，包含邮箱、密码输入框和登录按钮 |
| 2 | 输入邮箱: test@hailan.pro | 邮箱输入框显示输入内容 |
| 3 | 输入密码: password123 | 密码以掩码形式显示 |
| 4 | 点击"登录"按钮 | 提交登录请求 |
| 5 | 等待响应 | 跳转到首页或个人中心 |
| 6 | 检查页面显示 | 显示用户头像/昵称 |

### 预期结果
1. 登录请求返回200状态码
2. 返回access_token和refresh_token
3. 页面跳转到首页或个人中心
4. 页面显示用户信息（头像、昵称）
5. 导航栏显示登录状态

### 实际结果
(执行后填写)

### 测试状态
通过 / 失败 / 阻塞 / 跳过

### 备注
无
```

---

```markdown
## TC-PRIV-002 隐身模式切换测试

**用例ID**: TC-PRIV-002
**用例标题**: 切换到隐身模式后验证敏感信息脱敏
**优先级**: P0
**测试类型**: 功能测试
**关联需求**: REQ-PRIV-005

### 前置条件
1. 用户已登录
2. 当前隐私等级为标准模式(STANDARD)
3. 用户个人信息包含真实邮箱、手机号

### 测试步骤
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入"设置"->"隐私设置" | 显示隐私设置页面 |
| 2 | 点击"隐身模式"选项 | 显示切换确认弹窗 |
| 3 | 阅读提示信息后点击"确认" | 提交隐私等级切换请求 |
| 4 | 等待系统处理 | 显示"已切换到隐身模式"提示 |
| 5 | 访问个人中心页面 | 显示个人中心 |
| 6 | 查看邮箱显示 | 邮箱部分脱敏(如: ***@hailan.pro) |
| 7 | 查看手机号显示 | 手机号部分脱敏(如: 138****8000) |
| 8 | 查看浏览历史 | 显示"浏览历史已隐藏"提示 |

### 预期结果
1. 隐私等级成功切换为STEALTH
2. 敏感信息正确脱敏显示
3. 浏览历史不可见
4. 退出登录后重新登录，隐私等级保持为隐身模式
5. 切换记录被正确记录

### 实际结果
(执行后填写)

### 测试状态
通过 / 失败 / 阻塞 / 跳过

### 备注
需要验证脱敏规则符合设计要求
```

---

```markdown
## TC-IOT-003 蓝牙设备连接测试

**用例ID**: TC-IOT-003
**用例标题**: 通过Web Bluetooth API连接智能设备
**优先级**: P1
**测试类型**: 功能测试
**关联需求**: REQ-IOT-001

### 前置条件
1. 使用支持Web Bluetooth的浏览器(Chrome/Edge)
2. 设备蓝牙已开启
3. 海蓝智能设备已开机且可被发现
4. 用户已登录

### 测试步骤
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 进入"我的设备"页面 | 显示设备列表和"添加设备"按钮 |
| 2 | 点击"添加设备" | 浏览器弹出设备选择弹窗 |
| 3 | 选择"HaiLan Smart Device" | 请求配对权限 |
| 4 | 确认配对 | 开始连接设备 |
| 5 | 等待连接完成 | 显示"已连接"状态 |
| 6 | 查看设备信息 | 显示设备名称、电量等信息 |

### 预期结果
1. 正确触发蓝牙设备扫描
2. 找到目标设备
3. 成功建立连接
4. 显示设备详细信息
5. 设备状态显示为"已连接"
6. 可接收设备数据

### 实际结果
(执行后填写)

### 测试状态
通过 / 失败 / 阻塞 / 跳过

### 备注
iOS Safari不支持Web Bluetooth，需要降级处理
```

#### 3.4 测试用例组织结构

```
test-cases/
├── 01-smoke-tests/          # 冒烟测试(P0)
│   ├── TC-AUTH-001.md       # 登录功能
│   ├── TC-AUTH-002.md       # 注册功能
│   └── TC-HOME-001.md       # 首页加载
├── 02-authentication/       # 认证模块
│   ├── TC-AUTH-001.md
│   ├── TC-AUTH-002.md
│   ├── TC-AUTH-003.md
│   └── TC-AUTH-004.md
├── 03-privacy/              # 隐私功能
│   ├── TC-PRIV-001.md       # 隐私等级切换
│   ├── TC-PRIV-002.md       # 隐身模式
│   └── TC-PRIV-003.md       # 伪装模式
├── 04-shopping/             # 购物流程
│   ├── TC-SHOP-001.md       # 商品浏览
│   ├── TC-SHOP-002.md       # 购物车
│   └── TC-SHOP-003.md       # 订单提交
├── 05-payment/              # 支付模块
├── 06-iot/                  # IoT设备
├── 07-ai/                   # AI功能
├── 08-pwa/                  # PWA功能
├── 09-security/             # 安全测试
├── 10-performance/          # 性能测试
└── 11-compatibility/        # 兼容性测试
```

#### 3.5 测试用例管理工具配置

```typescript
// test-management/config.ts
export const testCaseConfig = {
  // 测试用例编号规则
  idPattern: 'TC-{MODULE}-{NUMBER}',

  // 模块代码映射
  modules: {
    AUTH: 'authentication',
    PRIV: 'privacy',
    SHOP: 'shopping',
    PAY: 'payment',
    IOT: 'iot',
    AI: 'ai',
    PWA: 'pwa',
    SEC: 'security',
    PERF: 'performance',
    COMP: 'compatibility',
  },

  // 优先级定义
  priorities: {
    P0: { name: '冒烟测试', description: '核心功能，必须通过' },
    P1: { name: '高优先级', description: '重要功能' },
    P2: { name: '中优先级', description: '常规功能' },
    P3: { name: '低优先级', description: '边缘功能' },
  },

  // 测试状态
  statuses: {
    PENDING: { label: '待执行', color: 'gray' },
    PASSED: { label: '通过', color: 'green' },
    FAILED: { label: '失败', color: 'red' },
    BLOCKED: { label: '阻塞', color: 'yellow' },
    SKIPPED: { label: '跳过', color: 'blue' },
  },

  // 测试类型
  types: [
    '功能测试',
    '性能测试',
    '安全测试',
    '兼容性测试',
    '易用性测试',
    '回归测试',
    '冒烟测试',
  ],
};
```

#### 3.6 测试用例执行流程

```yaml
测试执行流程:

  准备阶段:
    - 确认测试环境就绪
    - 准备测试数据
    - 确认测试账号
    - 检查依赖服务状态

  执行阶段:
    - 按优先级执行(P0 -> P1 -> P2 -> P3)
    - 记录实际结果
    - 截图/录屏(失败时)
    - 记录日志

  结果处理:
    - 失败用例创建Bug
    - 阻塞用例记录原因
    - 生成测试报告
    - 通知相关人员

  回归阶段:
    - Bug修复后回归测试
    - 关联用例全部执行
    - 验证修复无副作用
```

#### 3.7 自动化测试用例

```typescript
// tests/test-cases/TC-AUTH-001.spec.ts
import { test, expect } from '@playwright/test';

/**
 * TC-AUTH-001: 用户登录功能测试
 *
 * 优先级: P0
 * 类型: 功能测试
 */
test.describe('TC-AUTH-001 用户登录功能测试', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/login');
  });

  test('正确凭据登录应成功', async ({ page }) => {
    // 步骤1: 输入邮箱
    await page.fill('[name="email"]', 'test@hailan.pro');
    await expect(page.locator('[name="email"]')).toHaveValue('test@hailan.pro');

    // 步骤2: 输入密码
    await page.fill('[name="password"]', 'password123');
    await expect(page.locator('[name="password"]')).toHaveValue('password123');

    // 步骤3: 点击登录
    await page.click('button[type="submit"]');

    // 验证: 跳转到首页
    await expect(page).toHaveURL(/\/(dashboard|home)/);

    // 验证: 显示用户信息
    await expect(page.locator('[data-testid="user-avatar"]')).toBeVisible();
    await expect(page.locator('[data-testid="user-name"]')).toContainText('test');
  });

  test('错误凭据登录应失败', async ({ page }) => {
    await page.fill('[name="email"]', 'test@hailan.pro');
    await page.fill('[name="password"]', 'wrongpassword');
    await page.click('button[type="submit"]');

    // 验证: 显示错误提示
    await expect(page.locator('.error-message')).toContainText('邮箱或密码错误');
    await expect(page).toHaveURL('/login');
  });
});
```

#### 3.8 测试用例追踪矩阵

```markdown
## 需求追踪矩阵

| 需求ID | 需求描述 | 测试用例 | 覆盖率 | 状态 |
|--------|----------|----------|--------|------|
| REQ-AUTH-001 | 用户登录 | TC-AUTH-001, TC-AUTH-002, TC-AUTH-003 | 100% | 通过 |
| REQ-PRIV-001 | 隐私等级 | TC-PRIV-001, TC-PRIV-002, TC-PRIV-003 | 100% | 通过 |
| REQ-IOT-001 | 设备连接 | TC-IOT-001, TC-IOT-002, TC-IOT-003 | 100% | 部分通过 |
| REQ-SHOP-001 | 商品浏览 | TC-SHOP-001, TC-SHOP-002 | 100% | 通过 |
```

---

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」
