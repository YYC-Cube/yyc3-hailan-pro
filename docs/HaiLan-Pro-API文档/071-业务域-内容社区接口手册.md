---
file: 071-业务域-内容社区接口手册.md
description: HaiLan Pro HaiLan 学院内容社区相关接口的详细定义，包含文章、评论、问答等
author: YanYuCloudCube Team
version: v1.0.0
created: 2026-02-03
updated: 2026-02-03
status: published
tags:
  - API接口,[业务域],[内容社区]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 071 业务域-内容社区接口手册

## 概述

本文档详细描述HaiLan Pro项目HaiLan学院内容社区相关接口的详细定义，包含文章、评论、问答等，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范内容社区接口的定义和使用
- 为前后端开发人员提供清晰的接口文档
- 保障内容社区功能的一致性和可维护性

### 2. 接口列表

| 接口名称 | HTTP方法 | 路径 | 认证要求 |
|---------|---------|------|---------|
| 获取文章列表 | GET | /api/v1.0/community/articles | 可选 |
| 获取文章详情 | GET | /api/v1.0/community/articles/{articleId} | 可选 |
| 创建文章 | POST | /api/v1.0/community/articles | JWT Token |
| 更新文章 | PUT | /api/v1.0/community/articles/{articleId} | JWT Token |
| 删除文章 | DELETE | /api/v1.0/community/articles/{articleId} | JWT Token |
| 点赞文章 | POST | /api/v1.0/community/articles/{articleId}/like | JWT Token |
| 取消点赞文章 | DELETE | /api/v1.0/community/articles/{articleId}/like | JWT Token |
| 收藏文章 | POST | /api/v1.0/community/articles/{articleId}/favorite | JWT Token |
| 取消收藏文章 | DELETE | /api/v1.0/community/articles/{articleId}/favorite | JWT Token |
| 获取评论列表 | GET | /api/v1.0/community/articles/{articleId}/comments | 可选 |
| 创建评论 | POST | /api/v1.0/community/articles/{articleId}/comments | JWT Token |
| 删除评论 | DELETE | /api/v1.0/community/comments/{commentId} | JWT Token |
| 获取问答列表 | GET | /api/v1.0/community/qa | 可选 |
| 获取问答详情 | GET | /api/v1.0/community/qa/{qaId} | 可选 |
| 创建问题 | POST | /api/v1.0/community/qa | JWT Token |
| 回答问题 | POST | /api/v1.0/community/qa/{qaId}/answers | JWT Token |
| 采纳答案 | POST | /api/v1.0/community/qa/{qaId}/answers/{answerId}/accept | JWT Token |
| 获取分类列表 | GET | /api/v1.0/community/categories | 可选 |
| 获取标签列表 | GET | /api/v1.0/community/tags | 可选 |
| 搜索内容 | GET | /api/v1.0/community/search | 可选 |
| 上传图片 | POST | /api/v1.0/community/upload/image | JWT Token |

### 3. 接口详情

#### 3.1 获取文章列表

##### 3.1.1 接口定义
```
GET /api/v1.0/community/articles
```

##### 3.1.2 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| page | number | 否 | 页码 | 1 |
| pageSize | number | 否 | 每页数量 | 20 |
| categoryId | string | 否 | 分类ID | cat-123 |
| tag | string | 否 | 标签 | 健康 |
| sort | string | 否 | 排序方式 | LATEST/HOT/RECOMMENDED |

##### 3.1.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 100,
    "page": 1,
    "pageSize": 20,
    "articles": [
      {
        "articleId": "article-123",
        "title": "如何保持健康的生活方式",
        "summary": "健康的生活方式对我们的身心健康至关重要...",
        "coverImage": "https://cdn.hailan.com/articles/article-123.jpg",
        "author": {
          "userId": "user-123",
          "nickname": "健康达人",
          "avatar": "https://cdn.hailan.com/avatars/user-123.jpg"
        },
        "category": {
          "categoryId": "cat-123",
          "name": "健康生活"
        },
        "tags": ["健康", "生活方式"],
        "viewCount": 1234,
        "likeCount": 56,
        "commentCount": 12,
        "isLiked": false,
        "isFavorited": false,
        "createdAt": "2026-02-03T10:00:00.000Z",
        "updatedAt": "2026-02-03T10:00:00.000Z"
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.1.4 错误码
| 错误码 | 说明 |
|-------|------|
| 8000 | 分类不存在 |
| 8001 | 参数错误 |

#### 3.2 获取文章详情

##### 3.2.1 接口定义
```
GET /api/v1.0/community/articles/{articleId}
```

##### 3.2.2 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.2.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "articleId": "article-123",
    "title": "如何保持健康的生活方式",
    "content": "<p>健康的生活方式对我们的身心健康至关重要...</p>",
    "coverImage": "https://cdn.hailan.com/articles/article-123.jpg",
    "author": {
      "userId": "user-123",
      "nickname": "健康达人",
      "avatar": "https://cdn.hailan.com/avatars/user-123.jpg",
      "bio": "健康生活倡导者"
    },
    "category": {
      "categoryId": "cat-123",
      "name": "健康生活"
    },
    "tags": ["健康", "生活方式"],
    "viewCount": 1234,
    "likeCount": 56,
    "commentCount": 12,
    "isLiked": false,
    "isFavorited": false,
    "createdAt": "2026-02-03T10:00:00.000Z",
    "updatedAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.2.4 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |

#### 3.3 创建文章

##### 3.3.1 接口定义
```
POST /api/v1.0/community/articles
```

##### 3.3.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.3.3 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| title | string | 是 | 文章标题 | 如何保持健康的生活方式 |
| content | string | 是 | 文章内容（HTML） | <p>内容...</p> |
| summary | string | 否 | 文章摘要 | 健康的生活方式对我们的身心健康至关重要... |
| coverImage | string | 否 | 封面图片URL | https://cdn.hailan.com/images/cover.jpg |
| categoryId | string | 是 | 分类ID | cat-123 |
| tags | array | 否 | 标签列表 | ["健康", "生活方式"] |

##### 3.3.4 请求示例
```json
{
  "title": "如何保持健康的生活方式",
  "content": "<p>健康的生活方式对我们的身心健康至关重要...</p>",
  "summary": "健康的生活方式对我们的身心健康至关重要...",
  "coverImage": "https://cdn.hailan.com/images/cover.jpg",
  "categoryId": "cat-123",
  "tags": ["健康", "生活方式"]
}
```

##### 3.3.5 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "创建成功",
  "data": {
    "articleId": "article-123",
    "title": "如何保持健康的生活方式",
    "createdAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.3.6 错误码
| 错误码 | 说明 |
|-------|------|
| 8000 | 分类不存在 |
| 8003 | 标题不能为空 |
| 8004 | 内容不能为空 |
| 1121 | Token已过期 |

#### 3.4 更新文章

##### 3.4.1 接口定义
```
PUT /api/v1.0/community/articles/{articleId}
```

##### 3.4.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.4.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.4.4 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| title | string | 否 | 文章标题 | 如何保持健康的生活方式 |
| content | string | 否 | 文章内容（HTML） | <p>内容...</p> |
| summary | string | 否 | 文章摘要 | 健康的生活方式对我们的身心健康至关重要... |
| coverImage | string | 否 | 封面图片URL | https://cdn.hailan.com/images/cover.jpg |
| categoryId | string | 否 | 分类ID | cat-123 |
| tags | array | 否 | 标签列表 | ["健康", "生活方式"] |

##### 3.4.5 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "更新成功",
  "data": {
    "articleId": "article-123",
    "updatedAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.4.6 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8005 | 无权限修改 |
| 1121 | Token已过期 |

#### 3.5 删除文章

##### 3.5.1 接口定义
```
DELETE /api/v1.0/community/articles/{articleId}
```

##### 3.5.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.5.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.5.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "删除成功",
  "data": null,
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.5.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8005 | 无权限删除 |
| 1121 | Token已过期 |

#### 3.6 点赞文章

##### 3.6.1 接口定义
```
POST /api/v1.0/community/articles/{articleId}/like
```

##### 3.6.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.6.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.6.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "点赞成功",
  "data": {
    "articleId": "article-123",
    "likeCount": 57,
    "isLiked": true
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.6.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8006 | 已点赞 |
| 1121 | Token已过期 |

#### 3.7 取消点赞文章

##### 3.7.1 接口定义
```
DELETE /api/v1.0/community/articles/{articleId}/like
```

##### 3.7.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.7.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.7.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "取消点赞成功",
  "data": {
    "articleId": "article-123",
    "likeCount": 56,
    "isLiked": false
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.7.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8007 | 未点赞 |
| 1121 | Token已过期 |

#### 3.8 收藏文章

##### 3.8.1 接口定义
```
POST /api/v1.0/community/articles/{articleId}/favorite
```

##### 3.8.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.8.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.8.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "收藏成功",
  "data": {
    "articleId": "article-123",
    "isFavorited": true
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.8.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8008 | 已收藏 |
| 1121 | Token已过期 |

#### 3.9 取消收藏文章

##### 3.9.1 接口定义
```
DELETE /api/v1.0/community/articles/{articleId}/favorite
```

##### 3.9.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.9.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.9.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "取消收藏成功",
  "data": {
    "articleId": "article-123",
    "isFavorited": false
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.9.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8009 | 未收藏 |
| 1121 | Token已过期 |

#### 3.10 获取评论列表

##### 3.10.1 接口定义
```
GET /api/v1.0/community/articles/{articleId}/comments
```

##### 3.10.2 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.10.3 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| page | number | 否 | 页码 | 1 |
| pageSize | number | 否 | 每页数量 | 20 |

##### 3.10.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 12,
    "page": 1,
    "pageSize": 20,
    "comments": [
      {
        "commentId": "comment-123",
        "content": "文章写得很好，受益匪浅！",
        "author": {
          "userId": "user-456",
          "nickname": "热心用户",
          "avatar": "https://cdn.hailan.com/avatars/user-456.jpg"
        },
        "likeCount": 5,
        "isLiked": false,
        "createdAt": "2026-02-03T10:00:00.000Z"
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.10.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |

#### 3.11 创建评论

##### 3.11.1 接口定义
```
POST /api/v1.0/community/articles/{articleId}/comments
```

##### 3.11.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.11.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| articleId | string | 是 | 文章ID | article-123 |

##### 3.11.4 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| content | string | 是 | 评论内容 | 文章写得很好，受益匪浅！ |
| parentId | string | 否 | 父评论ID（回复时使用） | comment-123 |

##### 3.11.5 请求示例
```json
{
  "content": "文章写得很好，受益匪浅！"
}
```

##### 3.11.6 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "评论成功",
  "data": {
    "commentId": "comment-123",
    "content": "文章写得很好，受益匪浅！",
    "createdAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.11.7 错误码
| 错误码 | 说明 |
|-------|------|
| 8002 | 文章不存在 |
| 8010 | 评论内容不能为空 |
| 1121 | Token已过期 |

#### 3.12 删除评论

##### 3.12.1 接口定义
```
DELETE /api/v1.0/community/comments/{commentId}
```

##### 3.12.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.12.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| commentId | string | 是 | 评论ID | comment-123 |

##### 3.12.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "删除成功",
  "data": null,
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.12.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8011 | 评论不存在 |
| 8012 | 无权限删除 |
| 1121 | Token已过期 |

#### 3.13 获取问答列表

##### 3.13.1 接口定义
```
GET /api/v1.0/community/qa
```

##### 3.13.2 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| page | number | 否 | 页码 | 1 |
| pageSize | number | 否 | 每页数量 | 20 |
| status | string | 否 | 问题状态 | UNANSWERED/ANSWERED/ACCEPTED |
| categoryId | string | 否 | 分类ID | cat-123 |

##### 3.13.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "total": 50,
    "page": 1,
    "pageSize": 20,
    "questions": [
      {
        "qaId": "qa-123",
        "title": "如何正确使用按摩器？",
        "content": "我刚买了一台按摩器，不知道怎么使用...",
        "author": {
          "userId": "user-789",
          "nickname": "新手用户",
          "avatar": "https://cdn.hailan.com/avatars/user-789.jpg"
        },
        "category": {
          "categoryId": "cat-456",
          "name": "产品使用"
        },
        "answerCount": 3,
        "viewCount": 234,
        "status": "ANSWERED",
        "statusText": "已回答",
        "createdAt": "2026-02-03T10:00:00.000Z"
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.13.4 错误码
| 错误码 | 说明 |
|-------|------|
| 8000 | 分类不存在 |

#### 3.14 获取问答详情

##### 3.14.1 接口定义
```
GET /api/v1.0/community/qa/{qaId}
```

##### 3.14.2 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| qaId | string | 是 | 问答ID | qa-123 |

##### 3.14.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "qaId": "qa-123",
    "title": "如何正确使用按摩器？",
    "content": "我刚买了一台按摩器，不知道怎么使用...",
    "author": {
      "userId": "user-789",
      "nickname": "新手用户",
      "avatar": "https://cdn.hailan.com/avatars/user-789.jpg"
    },
    "category": {
      "categoryId": "cat-456",
      "name": "产品使用"
    },
    "status": "ANSWERED",
    "statusText": "已回答",
    "answers": [
      {
        "answerId": "answer-123",
        "content": "使用按摩器前，请先清洁双手和设备...",
        "author": {
          "userId": "user-999",
          "nickname": "专家顾问",
          "avatar": "https://cdn.hailan.com/avatars/user-999.jpg",
          "isExpert": true
        },
        "likeCount": 15,
        "isAccepted": true,
        "isLiked": false,
        "createdAt": "2026-02-03T10:05:00.000Z"
      }
    ],
    "viewCount": 234,
    "createdAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.14.4 错误码
| 错误码 | 说明 |
|-------|------|
| 8013 | 问答不存在 |

#### 3.15 创建问题

##### 3.15.1 接口定义
```
POST /api/v1.0/community/qa
```

##### 3.15.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.15.3 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| title | string | 是 | 问题标题 | 如何正确使用按摩器？ |
| content | string | 是 | 问题内容 | 我刚买了一台按摩器，不知道怎么使用... |
| categoryId | string | 是 | 分类ID | cat-456 |
| images | array | 否 | 图片列表 | ["https://cdn.hailan.com/images/img1.jpg"] |

##### 3.15.4 请求示例
```json
{
  "title": "如何正确使用按摩器？",
  "content": "我刚买了一台按摩器，不知道怎么使用...",
  "categoryId": "cat-456"
}
```

##### 3.15.5 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "创建成功",
  "data": {
    "qaId": "qa-123",
    "title": "如何正确使用按摩器？",
    "createdAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.15.6 错误码
| 错误码 | 说明 |
|-------|------|
| 8000 | 分类不存在 |
| 8014 | 标题不能为空 |
| 8015 | 内容不能为空 |
| 1121 | Token已过期 |

#### 3.16 回答问题

##### 3.16.1 接口定义
```
POST /api/v1.0/community/qa/{qaId}/answers
```

##### 3.16.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.16.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| qaId | string | 是 | 问答ID | qa-123 |

##### 3.16.4 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| content | string | 是 | 回答内容 | 使用按摩器前，请先清洁双手和设备... |

##### 3.16.5 请求示例
```json
{
  "content": "使用按摩器前，请先清洁双手和设备..."
}
```

##### 3.16.6 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "回答成功",
  "data": {
    "answerId": "answer-123",
    "content": "使用按摩器前，请先清洁双手和设备...",
    "createdAt": "2026-02-03T10:00:00.000Z"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.16.7 错误码
| 错误码 | 说明 |
|-------|------|
| 8013 | 问答不存在 |
| 8016 | 回答内容不能为空 |
| 1121 | Token已过期 |

#### 3.17 采纳答案

##### 3.17.1 接口定义
```
POST /api/v1.0/community/qa/{qaId}/answers/{answerId}/accept
```

##### 3.17.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
```

##### 3.17.3 路径参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| qaId | string | 是 | 问答ID | qa-123 |
| answerId | string | 是 | 回答ID | answer-123 |

##### 3.17.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "采纳成功",
  "data": {
    "qaId": "qa-123",
    "answerId": "answer-123",
    "status": "ACCEPTED",
    "statusText": "已采纳"
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.17.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8013 | 问答不存在 |
| 8017 | 回答不存在 |
| 8018 | 无权限采纳 |
| 8019 | 已采纳其他答案 |
| 1121 | Token已过期 |

#### 3.18 获取分类列表

##### 3.18.1 接口定义
```
GET /api/v1.0/community/categories
```

##### 3.18.2 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| type | string | 否 | 分类类型 | ARTICLE/QA |

##### 3.18.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "categories": [
      {
        "categoryId": "cat-123",
        "name": "健康生活",
        "icon": "https://cdn.hailan.com/icons/cat-123.png",
        "articleCount": 150,
        "qaCount": 30
      },
      {
        "categoryId": "cat-456",
        "name": "产品使用",
        "icon": "https://cdn.hailan.com/icons/cat-456.png",
        "articleCount": 80,
        "qaCount": 50
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

#### 3.19 获取标签列表

##### 3.19.1 接口定义
```
GET /api/v1.0/community/tags
```

##### 3.19.2 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| keyword | string | 否 | 搜索关键词 | 健康 |

##### 3.19.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "获取成功",
  "data": {
    "tags": [
      {
        "tagId": "tag-123",
        "name": "健康",
        "articleCount": 200,
        "qaCount": 45
      },
      {
        "tagId": "tag-456",
        "name": "生活方式",
        "articleCount": 150,
        "qaCount": 30
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

#### 3.20 搜索内容

##### 3.20.1 接口定义
```
GET /api/v1.0/community/search
```

##### 3.20.2 查询参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| keyword | string | 是 | 搜索关键词 | 按摩器 |
| type | string | 否 | 内容类型 | ARTICLE/QA/ALL |
| page | number | 否 | 页码 | 1 |
| pageSize | number | 否 | 每页数量 | 20 |

##### 3.20.3 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "搜索成功",
  "data": {
    "keyword": "按摩器",
    "total": 45,
    "page": 1,
    "pageSize": 20,
    "results": [
      {
        "type": "ARTICLE",
        "typeText": "文章",
        "articleId": "article-123",
        "title": "如何正确使用按摩器",
        "summary": "按摩器是现代人放松身心的好工具...",
        "coverImage": "https://cdn.hailan.com/articles/article-123.jpg"
      },
      {
        "type": "QA",
        "typeText": "问答",
        "qaId": "qa-123",
        "title": "按摩器使用注意事项",
        "content": "使用按摩器时需要注意以下几点...",
        "answerCount": 5
      }
    ]
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

#### 3.21 上传图片

##### 3.21.1 接口定义
```
POST /api/v1.0/community/upload/image
```

##### 3.21.2 请求头
```http
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: multipart/form-data
```

##### 3.21.3 请求参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|------|------|------|
| file | File | 是 | 图片文件 | image.jpg |

##### 3.21.4 成功响应
```json
{
  "success": true,
  "code": 200,
  "message": "上传成功",
  "data": {
    "url": "https://cdn.hailan.com/images/abc123.jpg",
    "filename": "image.jpg",
    "size": 102400,
    "width": 1920,
    "height": 1080
  },
  "timestamp": "2026-02-03T10:00:00.000Z",
  "requestId": "550e8400-e29b-41d4-a716-446655440001"
}
```

##### 3.21.5 错误码
| 错误码 | 说明 |
|-------|------|
| 8020 | 文件格式不支持 |
| 8021 | 文件大小超限 |
| 1121 | Token已过期 |

### 4. 数据模型

#### 4.1 文章模型

```typescript
interface Article {
  articleId: string;
  title: string;
  content: string;
  summary?: string;
  coverImage?: string;
  author: Author;
  category: Category;
  tags: string[];
  viewCount: number;
  likeCount: number;
  commentCount: number;
  isLiked: boolean;
  isFavorited: boolean;
  createdAt: string;
  updatedAt: string;
}

interface Author {
  userId: string;
  nickname: string;
  avatar: string;
  bio?: string;
}
```

#### 4.2 评论模型

```typescript
interface Comment {
  commentId: string;
  content: string;
  articleId: string;
  author: Author;
  parentId?: string;
  likeCount: number;
  isLiked: boolean;
  createdAt: string;
}
```

#### 4.3 问答模型

```typescript
interface QA {
  qaId: string;
  title: string;
  content: string;
  author: Author;
  category: Category;
  status: 'UNANSWERED' | 'ANSWERED' | 'ACCEPTED';
  statusText: string;
  answers: Answer[];
  viewCount: number;
  createdAt: string;
}

interface Answer {
  answerId: string;
  content: string;
  author: Author;
  likeCount: number;
  isAccepted: boolean;
  isLiked: boolean;
  createdAt: string;
}
```

#### 4.4 分类模型

```typescript
interface Category {
  categoryId: string;
  name: string;
  icon?: string;
  articleCount: number;
  qaCount: number;
}
```

### 5. 最佳实践

#### 5.1 前端实现

##### 5.1.1 富文本编辑器集成
```typescript
// 使用富文本编辑器创建文章
import { Editor } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';

const ArticleEditor = () => {
  const editor = new Editor({
    extensions: [StarterKit],
    content: '<p>开始编辑...</p>',
  });

  const handleSave = async () => {
    const content = editor.getHTML();
    await createArticle({
      title: articleTitle,
      content,
      categoryId: selectedCategory,
      tags: selectedTags
    });
  };

  return (
    <div>
      <input 
        value={articleTitle} 
        onChange={(e) => setArticleTitle(e.target.value)}
        placeholder="文章标题"
      />
      <EditorContent editor={editor} />
      <button onClick={handleSave}>发布</button>
    </div>
  );
};
```

##### 5.1.2 图片上传处理
```typescript
// 处理图片上传
const handleImageUpload = async (file) => {
  const formData = new FormData();
  formData.append('file', file);

  try {
    const response = await fetch('/api/v1.0/community/upload/image', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${localStorage.getItem('token')}`
      },
      body: formData
    });

    const result = await response.json();
    if (result.success) {
      return result.data.url;
    }
  } catch (error) {
    console.error('上传失败:', error);
  }
};
```

#### 5.2 后端实现

##### 5.2.1 内容审核
```typescript
// 内容审核过滤
import * as contentFilter from 'profanity-filter';

const filter = new contentFilter();

async function validateContent(content: string) {
  const hasProfanity = filter.isProfane(content);
  if (hasProfanity) {
    throw new Error('内容包含敏感词汇');
  }

  const hasSpam = await detectSpam(content);
  if (hasSpam) {
    throw new Error('内容疑似垃圾信息');
  }

  return true;
}

async function detectSpam(content: string): Promise<boolean> {
  const spamKeywords = ['广告', '推广', '加微信'];
  return spamKeywords.some(keyword => content.includes(keyword));
}
```

##### 5.2.2 搜索优化
```typescript
// 全文搜索实现
import { Client } from '@elastic/elasticsearch';

const esClient = new Client({
  node: 'http://localhost:9200'
});

async function searchContent(keyword: string, type: string) {
  const query = {
    bool: {
      must: [
        {
          multi_match: {
            query: keyword,
            fields: ['title^2', 'content', 'summary']
          }
        }
      ],
      filter: type !== 'ALL' ? [
        { term: { type: type.toLowerCase() } }
      ] : []
    }
  };

  const result = await esClient.search({
    index: 'community',
    body: { query }
  });

  return result.hits.hits.map(hit => hit._source);
}
```

### 6. 安全注意事项

#### 6.1 内容安全
- 实现内容审核机制
- 过滤敏感词汇
- 检测垃圾信息
- 人工审核重要内容

#### 6.2 用户隐私
- 保护用户个人信息
- 支持匿名发布
- 数据加密存储
- 符合隐私法规

#### 6.3 互动安全
- 防止刷赞行为
- 限制评论频率
- 实现举报机制
- 封禁违规用户

#### 6.4 数据安全
- 定期备份数据
- 实现数据恢复
- 访问日志记录
- 安全审计

## 附录

### A. 参考文档

- RESTful接口设计标准
- 接口错误码体系
- 接口签名鉴权手册
- YYC³项目规范文档

### B. 术语表

- UGC：User Generated Content（用户生成内容）
- CMS：Content Management System（内容管理系统）
- SEO：Search Engine Optimization（搜索引擎优化）

---

<div align="center">

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」

</div>
