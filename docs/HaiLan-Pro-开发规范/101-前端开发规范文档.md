---
@file: 101-前端开发规范文档.md
@description: HaiLan Pro 前端开发规范，包含代码风格、命名规范、组件规范、性能优化等
@author: YanYuCloudCube Team
@version: v1.0.0
@created: 2026-01-26
@updated: 2026-01-26
@status: published
@tags: [HaiLan-Pro-开发规范],[]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 101 前端开发规范文档

## 概述

本文档详细描述HaiLan Pro-HaiLan-Pro-开发规范-前端开发规范文档相关内容，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范前端开发规范文档相关的业务标准与技术落地要求
- 为项目相关人员提供清晰的参考依据
- 保障相关模块开发、实施、运维的一致性与规范性

### 2. 设计原则

#### 2.1 五高原则
- **高可用性**：确保系统7x24小时稳定运行，支持PWA离线能力
- **高性能**：优化响应时间和处理能力，支持高并发访问
- **高安全性**：保护用户数据和隐私安全，双重加密机制
- **高扩展性**：支持业务快速扩展，微服务架构设计
- **高可维护性**：便于后续维护和升级，模块化设计

#### 2.2 五标体系
- **标准化**：统一的技术和流程标准
- **规范化**：严格的开发和管理规范
- **自动化**：提高开发效率和质量，CI/CD自动化
- **智能化**：利用AI技术提升能力，LLM智能顾问
- **可视化**：直观的监控和管理界面

#### 2.3 五化架构
- **流程化**：标准化的开发流程
- **文档化**：完善的文档体系
- **工具化**：高效的开发工具链
- **数字化**：数据驱动的决策
- **生态化**：开放的生态系统

### 3. 前端开发规范

#### 3.1 开发环境配置

```bash
# Node.js版本要求
node >= 20.0.0
npm >= 10.0.0 或 pnpm >= 8.0.0

# 推荐使用包管理器
pnpm install  # 首选，速度快、节省空间
# 或
npm install

# 开发环境启动
pnpm dev:h5      # H5/PWA端
pnpm dev:mp-weixin   # 微信小程序
pnpm dev:mp-alipay   # 支付宝小程序
```

**IDE配置推荐**

```json
// .vscode/settings.json
{
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "typescript.tsdk": "node_modules/typescript/lib",
  "volar.takeOverMode.enabled": true
}
```

#### 3.2 项目目录结构

```
src/
├── api/              # API接口层
│   ├── index.ts      # API配置与实例
│   ├── user.ts       # 用户相关API
│   ├── product.ts    # 商品相关API
│   └── ...
├── assets/           # 静态资源
│   ├── images/       # 图片资源
│   ├── icons/        # 图标资源
│   └── fonts/        # 字体资源
├── components/       # 公共组件
│   ├── base/         # 基础组件
│   ├── business/     # 业务组件
│   └── privacy/      # 隐私相关组件
├── composables/      # 组合式函数
│   ├── useAuth.ts    # 认证相关
│   ├── usePrivacy.ts # 隐私相关
│   └── ...
├── pages/            # 页面
│   ├── index/        # 首页
│   ├── mall/         # 商城
│   ├── privacy/      # 隐私中心
│   └── ...
├── stores/           # Pinia状态管理
│   ├── user.ts
│   ├── cart.ts
│   └── ...
├── router/           # 路由配置
│   └── index.ts
├── styles/           # 全局样式
│   ├── index.scss    # 样式入口
│   ├── variables.scss # CSS变量
│   └── mixins.scss   # Sass混入
├── types/            # TypeScript类型定义
│   ├── api.ts        # API类型
│   ├── components.ts # 组件类型
│   └── ...
├── utils/            # 工具函数
│   ├── crypto.ts     # 加密工具
│   ├── format.ts     # 格式化工具
│   └── ...
├── App.vue           # 应用入口组件
├── main.ts           # 应用入口文件
└── manifest.json     # PWA清单文件
```

#### 3.3 命名规范

**文件命名**

```typescript
// 组件文件：PascalCase，多个单词用连字符连接
UserProfile.vue
PrivacySwitch.vue
ProductCard.vue

// 工具文件：camelCase
useAuth.ts
cryptoUtils.ts
formatHelper.ts

// 样式文件：kebab-case
user-profile.scss
privacy-variables.scss
```

**变量命名**

```typescript
// 常量：UPPER_SNAKE_CASE
const API_BASE_URL = 'https://api.hailan.pro';
const MAX_RETRY_COUNT = 3;

// 变量/函数：camelCase
const userInfo = ref<UserInfo>({});
const isLoggedIn = computed(() => !!userInfo.value);

function getUserById(id: string) { }
function formatDateTime(date: Date) { }

// 类/接口/类型：PascalCase
interface UserInfo { }
class ProductService { }
type MessageStatus = 'pending' | 'sent' | 'failed';

// 私有变量：以下划线开头
const _privateData = ref({});
function _internalMethod() { }
```

**CSS类命名**

```scss
// BEM方法论
.block { }
.block__element { }
.block--modifier { }

// 示例
.privacy-switch { }
.privacy-switch__toggle { }
.privacy-switch--active { }

// 工具类：Tailwind CSS
.flex { display: flex; }
.text-center { text-align: center; }
```

#### 3.4 代码风格规范

**Vue 3 Composition API风格**

```vue
<!-- 推荐：使用<script setup>语法 -->
<template>
  <div class="user-profile">
    <h1>{{ user.nickname }}</h1>
    <button @click="handleLogout">退出登录</button>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';
import { useUserStore } from '@/stores/user';
import { useRouter } from 'vue-router';

// Props定义
interface Props {
  userId: string;
  showActions?: boolean;
}
const props = withDefaults(defineProps<Props>(), {
  showActions: true
});

// Emits定义
interface Emits {
  (e: 'update', user: UserInfo): void;
  (e: 'delete', userId: string): void;
}
const emit = defineEmits<Emits>();

// 响应式数据
const userStore = useUserStore();
const router = useRouter();
const loading = ref(false);

// 计算属性
const user = computed(() => userStore.currentUser);
const canEdit = computed(() => user.value?.id === props.userId);

// 方法
async function handleLogout() {
  loading.value = true;
  try {
    await userStore.logout();
    router.push('/login');
  } finally {
    loading.value = false;
  }
}

// 生命周期
onMounted(async () => {
  await userStore.fetchUser(props.userId);
});
</script>

<style scoped lang="scss">
.user-profile {
  padding: 20px;

  &__header {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  &--loading {
    opacity: 0.6;
    pointer-events: none;
  }
}
</style>
```

**TypeScript类型定义规范**

```typescript
// src/types/user.ts
/**
 * 用户基础信息
 */
export interface UserInfo {
  /** 用户ID */
  id: string;
  /** 昵称 */
  nickname: string;
  /** 头像 */
  avatar: string;
  /** 邮箱 */
  email: string;
  /** 会员等级 */
  memberLevel: MemberLevel;
  /** 隐私等级 */
  privacyLevel: PrivacyLevel;
}

/**
 * 会员等级枚举
 */
export enum MemberLevel {
  REGULAR = 'regular',
  SILVER = 'silver',
  GOLD = 'gold',
  PLATINUM = 'platinum'
}

/**
 * 隐私等级枚举
 */
export enum PrivacyLevel {
  STANDARD = 'standard',
  STEALTH = 'stealth',
  DISGUISE = 'disguise'
}

// 使用联合类型而非枚举（适用于简单场景）
export type MessageStatus = 'pending' | 'sent' | 'delivered' | 'failed';
```

#### 3.5 组件开发规范

**组件定义原则**

```vue
<!-- 基础组件：位于components/base/，高度可复用 -->
<!-- components/base/Button.vue -->
<template>
  <button
    :class="['hl-button', `hl-button--${variant}`, `hl-button--${size}`, { 'hl-button--disabled': disabled }]"
    :disabled="disabled"
    @click="handleClick"
  >
    <slot />
  </button>
</template>

<script setup lang="ts">
interface Props {
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
}

withDefaults(defineProps<Props>(), {
  variant: 'primary',
  size: 'md',
  disabled: false
});

const emit = defineEmits<{
  click: [event: MouseEvent];
}>();

function handleClick(event: MouseEvent) {
  emit('click', event);
}
</script>

<!-- 业务组件：位于components/business/，封装业务逻辑 -->
<!-- components/business/ProductCard.vue -->
<template>
  <div class="product-card" @click="goToDetail">
    <img :src="product.image" :alt="product.name" class="product-card__image" />
    <div class="product-card__content">
      <h3 class="product-card__title">{{ product.name }}</h3>
      <p class="product-card__price">¥{{ product.price }}</p>
    </div>
  </div>
</template>

<!-- 隐私组件：位于components/privacy/，处理隐私相关功能 -->
<!-- components/privacy/PrivacySwitch.vue -->
```

**组件通信规范**

```typescript
// 父传子：使用props，明确定义类型
interface ChildProps {
  data: UserInfo;
  onUpdate: (data: UserInfo) => void;
}

// 子传父：使用emit，明确定义事件
interface ChildEmits {
  update: [value: string];
  delete: [id: string];
}

// 跨层级通信：使用provide/inject
// 父组件
provide('userInfo', readonly(userInfo));
provide('updateUser', (data: UserInfo) => { /* ... */ });

// 子组件
const userInfo = inject<UserInfo>('userInfo');
const updateUser = inject<(data: UserInfo) => void>('updateUser');

// 复杂状态：使用Pinia
// stores/user.ts
export const useUserStore = defineStore('user', () => {
  const currentUser = ref<UserInfo | null>(null);

  async function fetchUser(id: string) {
    const { data } = await api.getUser(id);
    currentUser.value = data;
  }

  return { currentUser, fetchUser };
});
```

#### 3.6 API调用规范

```typescript
// src/api/index.ts - API实例配置
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';
import { useUserStore } from '@/stores/user';

const baseURL = import.meta.env.VITE_API_BASE_URL;

const apiInstance: AxiosInstance = axios.create({
  baseURL,
  timeout: 15000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// 请求拦截器
apiInstance.interceptors.request.use(
  (config) => {
    const userStore = useUserStore();
    if (userStore.token) {
      config.headers.Authorization = `Bearer ${userStore.token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// 响应拦截器
apiInstance.interceptors.response.use(
  (response: AxiosResponse) => {
    const { code, data, message } = response.data;
    if (code === 0) {
      return data;
    }
    // 业务错误处理
    showErrorToast(message);
    return Promise.reject(new Error(message));
  },
  (error) => {
    // HTTP错误处理
    if (error.response?.status === 401) {
      // Token过期，跳转登录
      router.push('/login');
    }
    return Promise.reject(error);
  }
);

export default apiInstance;

// src/api/user.ts - 用户API
import request from './index';
import type { UserInfo, LoginRequest, LoginResponse } from '@/types/user';

export const userApi = {
  /**
   * 用户登录
   */
  login(data: LoginRequest): Promise<LoginResponse> {
    return request.post('/auth/login', data);
  },

  /**
   * 获取用户信息
   */
  getUserInfo(userId: string): Promise<UserInfo> {
    return request.get(`/users/${userId}`);
  },

  /**
   * 更新用户信息
   */
  updateUserInfo(userId: string, data: Partial<UserInfo>): Promise<UserInfo> {
    return request.put(`/users/${userId}`, data);
  }
};

// 使用示例
import { userApi } from '@/api/user';

async function handleLogin() {
  try {
    const result = await userApi.login({
      email: form.value.email,
      password: form.value.password
    });
    // 处理登录成功
  } catch (error) {
    // 处理错误
  }
}
```

#### 3.7 状态管理规范（Pinia）

```typescript
// src/stores/user.ts
import { defineStore } from 'pinia';
import { ref, computed } from 'vue';
import type { UserInfo, MemberLevel } from '@/types/user';
import { userApi } from '@/api/user';

export const useUserStore = defineStore('user', () => {
  // State
  const currentUser = ref<UserInfo | null>(null);
  const token = ref<string | null>(localStorage.getItem('auth_token'));

  // Getters
  const isLoggedIn = computed(() => !!token.value && !!currentUser.value);
  const memberLevel = computed(() => currentUser.value?.memberLevel ?? MemberLevel.REGULAR);
  const isPremiumMember = computed(() =>
    [MemberLevel.GOLD, MemberLevel.PLATINUM].includes(memberLevel.value)
  );

  // Actions
  async function login(email: string, password: string) {
    const result = await userApi.login({ email, password });
    token.value = result.accessToken;
    currentUser.value = result.user;
    localStorage.setItem('auth_token', result.accessToken);
  }

  async function logout() {
    await userApi.logout();
    token.value = null;
    currentUser.value = null;
    localStorage.removeItem('auth_token');
  }

  async function fetchUser(userId: string) {
    const user = await userApi.getUserInfo(userId);
    currentUser.value = user;
  }

  function updateToken(newToken: string) {
    token.value = newToken;
    localStorage.setItem('auth_token', newToken);
  }

  return {
    // State
    currentUser,
    token,
    // Getters
    isLoggedIn,
    memberLevel,
    isPremiumMember,
    // Actions
    login,
    logout,
    fetchUser,
    updateToken
  };
});
```

#### 3.8 样式编写规范

**使用Tailwind CSS**

```vue
<template>
  <!-- 优先使用Tailwind工具类 -->
  <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow-md">
    <h1 class="text-xl font-bold text-gray-900">{{ title }}</h1>
    <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
      按钮
    </button>
  </div>

  <!-- 复杂组件使用scoped SCSS -->
  <div class="privacy-switch">
    <div class="privacy-switch__track"></div>
    <div class="privacy-switch__thumb"></div>
  </div>
</template>

<style scoped lang="scss">
// 使用CSS变量，便于主题切换
.privacy-switch {
  --switch-size: 48px;
  --switch-color: #0056b3;

  position: relative;
  width: calc(var(--switch-size) * 2);
  height: var(--switch-size);

  &__track {
    width: 100%;
    height: 100%;
    background: #e5e7eb;
    border-radius: 9999px;
    transition: background-color 0.3s ease;
  }

  &--active &__track {
    background: var(--switch-color);
  }

  &__thumb {
    position: absolute;
    top: 4px;
    left: 4px;
    width: calc(var(--switch-size) - 8px);
    height: calc(var(--switch-size) - 8px);
    background: white;
    border-radius: 50%;
    transition: transform 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  &--active &__thumb {
    transform: translateX(var(--switch-size));
  }
}
</style>
```

#### 3.9 性能优化规范

**组件懒加载**

```typescript
// router/index.ts
import { createRouter, createWebHistory } from 'vue-router';

const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/pages/index/index.vue') // 懒加载
  },
  {
    path: '/mall',
    name: 'Mall',
    component: () => import('@/pages/mall/index.vue')
  },
  {
    path: '/privacy',
    name: 'Privacy',
    component: () => import('@/pages/privacy/index.vue')
  }
];
```

**图片优化**

```vue
<template>
  <!-- 使用懒加载 -->
  <img v-lazy="imageSrc" alt="商品图片" />

  <!-- 使用WebP格式 -->
  <picture>
    <source :srcset="webpSrc" type="image/webp" />
    <img :src="jpgSrc" alt="商品图片" loading="lazy" />
  </picture>

  <!-- 使用响应式图片 -->
  <img
    :src="imageSrc"
    :srcset="`${imageSrc}@1x 1x, ${imageSrc}@2x 2x, ${imageSrc}@3x 3x`"
    alt="商品图片"
  />
</template>
```

**列表渲染优化**

```vue
<template>
  <!-- 使用key优化列表渲染 -->
  <div v-for="item in items" :key="item.id">
    {{ item.name }}
  </div>

  <!-- 大列表使用虚拟滚动 -->
  <RecycleScroller
    :items="largeList"
    :item-size="80"
    key-field="id"
    v-slot="{ item }"
  >
    <div>{{ item.name }}</div>
  </RecycleScroller>
</template>
```

**防抖与节流**

```typescript
import { useDebounceFn, useThrottleFn } from '@vueuse/core';

// 防抖：搜索输入
const handleSearch = useDebounceFn((keyword: string) => {
  searchProducts(keyword);
}, 300);

// 节流：滚动加载
const handleScroll = useThrottleFn(() => {
  loadMoreProducts();
}, 200);
```

#### 3.10 隐私安全编码规范

**敏感数据处理**

```typescript
// 加密存储敏感数据
import { encryptData, decryptData } from '@/utils/crypto';

// 存储时加密
function saveUserAddress(address: UserAddress) {
  const encrypted = encryptData(JSON.stringify(address));
  localStorage.setItem('user_address', encrypted);
}

// 读取时解密
function getUserAddress(): UserAddress | null {
  const encrypted = localStorage.getItem('user_address');
  if (!encrypted) return null;
  try {
    const decrypted = decryptData(encrypted);
    return JSON.parse(decrypted);
  } catch {
    return null;
  }
}

// 敏感日志脱敏
function sanitizeLog(data: any): any {
  if (typeof data !== 'object') return data;

  const sanitized = { ...data };
  const sensitiveFields = ['password', 'token', 'phone', 'idCard', 'bankAccount'];

  for (const field of sensitiveFields) {
    if (field in sanitized) {
      sanitized[field] = '***';
    }
  }

  return sanitized;
}
```

**隐私模式检测**

```typescript
import { usePrivacyStore } from '@/stores/privacy';

const privacyStore = usePrivacyStore();

// 根据隐私等级调整行为
function canShowSensitiveContent(): boolean {
  const level = privacyStore.currentLevel;

  switch (level) {
    case PrivacyLevel.STANDARD:
      return true;
    case PrivacyLevel.STEALTH:
      return false; // 隐身模式不显示敏感内容
    case PrivacyLevel.DISGUISE:
      return false; // 伪装模式显示虚拟内容
    default:
      return true;
  }
}
```

#### 3.11 错误处理规范

```typescript
// 统一错误处理
import { showToast } from '@nutui/nutui';

try {
  await someAsyncOperation();
} catch (error) {
  // 业务错误
  if (error instanceof BusinessError) {
    showToast({
      message: error.message,
      type: 'error'
    });
    return;
  }

  // 网络错误
  if (error instanceof NetworkError) {
    showToast({
      message: '网络连接失败，请检查网络设置',
      type: 'error'
    });
    return;
  }

  // 未知错误
  console.error('Unexpected error:', error);
  showToast({
    message: '操作失败，请稍后重试',
    type: 'error'
  });
}

// 全局错误处理
// main.ts
app.config.errorHandler = (error, instance, info) => {
  console.error('Global error:', error, info);
  // 上报错误到监控系统
  reportError(error, { component: instance?.$options.name, info });
};
```

#### 3.12 代码检查配置

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true
  },
  extends: [
    'plugin:vue/vue3-recommended',
    'plugin:@typescript-eslint/recommended',
    'prettier'
  ],
  parser: 'vue-eslint-parser',
  parserOptions: {
    ecmaVersion: 'latest',
    parser: '@typescript-eslint/parser',
    sourceType: 'module'
  },
  plugins: ['vue', '@typescript-eslint'],
  rules: {
    // Vue规则
    'vue/multi-word-component-names': 'off',
    'vue/no-v-html': 'warn',
    'vue/require-default-prop': 'off',
    'vue/require-explicit-emits': 'error',

    // TypeScript规则
    '@typescript-eslint/no-explicit-any': 'warn',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',

    // 通用规则
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off'
  }
};
```

```javascript
// .prettierrc.js
module.exports = {
  printWidth: 100,
  tabWidth: 2,
  useTabs: false,
  semi: true,
  singleQuote: true,
  quoteProps: 'as-needed',
  trailingComma: 'es5',
  bracketSpacing: true,
  arrowParens: 'always',
  endOfLine: 'lf',
  vueIndentScriptAndStyle: false
};
```

---

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」
