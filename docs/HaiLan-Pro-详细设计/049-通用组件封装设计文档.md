---
file: 049-通用组件封装设计文档.md
description: HaiLan Pro 前端/后端通用组件的封装原则与复用规范，提升开发效率
author: YanYuCloudCube Team
version: v1.0.0
created: 2026-01-26
updated: 2026-01-26
status: published
tags:
  - HaiLan-Pro-详细设计,[]
---

> ***YanYuCloudCube***
> **标语**：言启象限 | 语枢未来
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> **标语**：万象归元于云枢 | 深栈智启新纪元
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 049 通用组件封装设计文档

## 概述

本文档详细描述HaiLan Pro-HaiLan-Pro-详细设计-通用组件封装设计文档相关内容，确保项目按照YYC³标准规范进行开发和实施。

## 核心内容

### 1. 背景与目标

#### 1.1 项目背景
HaiLan Pro (海蓝) 是新一代高端、私密、智能的情趣健康生活管理平台。项目基于「五高五标五化」理念，通过 PWA 技术结合 AI 智能辅助与物联网，为用户提供从生理健康到心理愉悦的全方位解决方案。

#### 1.2 项目愿景
打造极致隐私、智能陪伴、品质合规、全场景覆盖的情趣健康生活管理平台，为用户提供安全、专业、高端的健康生活体验。

#### 1.3 核心价值主张
- **极致隐私**：双重加密、隐私浏览模式及伪装发货机制
- **智能陪伴**：基于 LLM 的 AI 情感与生理健康顾问
- **品质合规**：医疗级标准商品，高端"海蓝蓝"视觉调性
- **全场景覆盖**：PWA 端支持离线浏览、桌面安装及无缝推送

#### 1.4 文档目标
- 规范通用组件封装设计文档相关的业务标准与技术落地要求
- 为项目相关人员提供清晰的参考依据
- 保障相关模块开发、实施、运维的一致性与规范性

### 2. 设计原则

#### 2.1 五高原则
- **高可用性**：确保系统7x24小时稳定运行，支持PWA离线能力
- **高性能**：优化响应时间和处理能力，支持高并发访问
- **高安全性**：保护用户数据和隐私安全，双重加密机制
- **高扩展性**：支持业务快速扩展，微服务架构设计
- **高可维护性**：便于后续维护和升级，模块化设计

#### 2.2 五标体系
- **标准化**：统一的技术和流程标准
- **规范化**：严格的开发和管理规范
- **自动化**：提高开发效率和质量，CI/CD自动化
- **智能化**：利用AI技术提升能力，LLM智能顾问
- **可视化**：直观的监控和管理界面

#### 2.3 五化架构
- **流程化**：标准化的开发流程
- **文档化**：完善的文档体系
- **工具化**：高效的开发工具链
- **数字化**：数据驱动的决策
- **生态化**：开放的生态系统

### 3. 通用组件封装设计

#### 3.1 组件设计原则

```typescript
/**
 * 组件设计原则
 * 1. 单一职责：每个组件只做一件事
 * 2. 可复用性：通过props提供灵活配置
 * 3. 可组合性：组件可以嵌套使用
 * 4. 可测试性：组件逻辑与UI分离
 * 5. 向后兼容：新版本保持旧版本API
 */

/**
 * 基础组件Props接口
 */
interface BaseComponentProps {
  /** 组件类名 */
  className?: string;
  /** 自定义样式 */
  style?: Record<string, any>;
  /** 测试ID */
  testId?: string;
}
```

#### 3.2 前端基础组件

##### 3.2.1 按钮组件

```typescript
// src/components/button/HLButton.vue
<template>
  <button
    :class="buttonClass"
    :disabled="disabled || loading"
    :type="nativeType"
    @click="handleClick"
  >
    <span v-if="loading" class="hl-button__loading">
      <HLIcon :name="loadingIcon" :spin="true" />
    </span>
    <HLIcon v-if="icon && !loading" :name="icon" />
    <slot />
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue';

/**
 * 按钮类型
 */
type ButtonType = 'primary' | 'secondary' | 'outline' | 'text' | 'danger';

/**
 * 按钮尺寸
 */
type ButtonSize = 'small' | 'medium' | 'large';

/**
 * 按钮原生类型
 */
type NativeType = 'button' | 'submit' | 'reset';

interface Props extends BaseComponentProps {
  /** 按钮类型 */
  type?: ButtonType;
  /** 按钮尺寸 */
  size?: ButtonSize;
  /** 是否禁用 */
  disabled?: boolean;
  /** 是否加载中 */
  loading?: boolean;
  /** 图标名称 */
  icon?: string;
  /** 加载图标 */
  loadingIcon?: string;
  /** 原生type属性 */
  nativeType?: NativeType;
  /** 是否块级按钮 */
  block?: boolean;
  /** 是否圆角按钮 */
  round?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  type: 'primary',
  size: 'medium',
  loading: false,
  disabled: false,
  nativeType: 'button',
  block: false,
  round: false,
  loadingIcon: 'loading'
});

const emit = defineEmits<{
  click: [event: MouseEvent];
}>();

const buttonClass = computed(() => [
  'hl-button',
  `hl-button--${props.type}`,
  `hl-button--${props.size}`,
  {
    'hl-button--disabled': props.disabled,
    'hl-button--loading': props.loading,
    'hl-button--block': props.block,
    'hl-button--round': props.round
  },
  props.className
].filter(Boolean).join(' '));

const handleClick = (event: MouseEvent) => {
  if (!props.disabled && !props.loading) {
    emit('click', event);
  }
};
</script>

<style scoped>
.hl-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border: none;
  border-radius: var(--hl-radius-md);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--hl-transition-fast);
  white-space: nowrap;
}

.hl-button--primary {
  background-color: var(--hl-primary);
  color: white;
}

.hl-button--primary:hover {
  background-color: var(--hl-primary-dark);
}

.hl-button--secondary {
  background-color: var(--hl-secondary);
  color: white;
}

.hl-button--outline {
  background-color: transparent;
  border: 1px solid var(--hl-primary);
  color: var(--hl-primary);
}

.hl-button--outline:hover {
  background-color: var(--hl-primary-light);
}

.hl-button--danger {
  background-color: var(--hl-danger);
  color: white;
}

.hl-button--small {
  padding: 6px 12px;
  font-size: 14px;
}

.hl-button--medium {
  padding: 10px 20px;
  font-size: 16px;
}

.hl-button--large {
  padding: 14px 28px;
  font-size: 18px;
}

.hl-button--block {
  width: 100%;
}

.hl-button--round {
  border-radius: 9999px;
}

.hl-button--disabled,
.hl-button--loading {
  opacity: 0.6;
  cursor: not-allowed;
}
</style>
```

##### 3.2.2 输入框组件

```typescript
// src/components/input/HLInput.vue
<template>
  <div :class="inputWrapperClass">
    <span v-if="prefix" class="hl-input__prefix">
      <HLIcon :name="prefix" />
    </span>
    <input
      v-model="inputValue"
      :type="currentType"
      :class="inputClass"
      :placeholder="placeholder"
      :disabled="disabled"
      :readonly="readonly"
      :maxlength="maxlength"
      @focus="handleFocus"
      @blur="handleBlur"
    />
    <span
      v-if="showPassword || clearable"
      class="hl-input__suffix"
    >
      <HLIcon
        v-if="clearable && inputValue && !disabled && !readonly"
        name="close-circle"
        @click="handleClear"
      />
      <HLIcon
        v-if="showPassword"
        :name="passwordVisible ? 'eye' : 'eye-invisible'"
        @click="togglePassword"
      />
    </span>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, watch } from 'vue';

interface Props extends BaseComponentProps {
  /** 绑定值 */
  modelValue?: string | number;
  /** 输入框类型 */
  type?: string;
  /** 占位文本 */
  placeholder?: string;
  /** 是否禁用 */
  disabled?: boolean;
  /** 是否只读 */
  readonly?: boolean;
  /** 最大长度 */
  maxlength?: number;
  /** 前缀图标 */
  prefix?: string;
  /** 是否显示密码切换 */
  showPassword?: boolean;
  /** 是否可清空 */
  clearable?: boolean;
  /** 尺寸 */
  size?: 'small' | 'medium' | 'large';
  /** 输入状态 */
  status?: 'default' | 'success' | 'warning' | 'error';
}

const props = withDefaults(defineProps<Props>(), {
  type: 'text',
  disabled: false,
  readonly: false,
  showPassword: false,
  clearable: false,
  size: 'medium',
  status: 'default'
});

const emit = defineEmits<{
  'update:modelValue': [value: string | number];
  focus: [event: FocusEvent];
  blur: [event: FocusEvent];
  clear: [];
}>();

const inputValue = ref(props.modelValue);
const passwordVisible = ref(false);
const isFocused = ref(false);

watch(() => props.modelValue, (val) => {
  inputValue.value = val;
});

watch(inputValue, (val) => {
  emit('update:modelValue', val);
});

const currentType = computed(() => {
  if (props.showPassword) {
    return passwordVisible.value ? 'text' : 'password';
  }
  return props.type;
});

const inputWrapperClass = computed(() => [
  'hl-input',
  `hl-input--${props.size}`,
  `hl-input--${props.status}`,
  {
    'hl-input--disabled': props.disabled,
    'hl-input--focused': isFocused.value
  },
  props.className
].filter(Boolean).join(' '));

const inputClass = computed(() => 'hl-input__inner');

const handleFocus = (event: FocusEvent) => {
  isFocused.value = true;
  emit('focus', event);
};

const handleBlur = (event: FocusEvent) => {
  isFocused.value = false;
  emit('blur', event);
};

const handleClear = () => {
  inputValue.value = '';
  emit('clear');
};

const togglePassword = () => {
  passwordVisible.value = !passwordVisible.value;
};
</script>

<style scoped>
.hl-input {
  display: inline-flex;
  align-items: center;
  position: relative;
  border: 1px solid var(--hl-border);
  border-radius: var(--hl-radius-md);
  background-color: white;
  transition: all var(--hl-transition-fast);
}

.hl-input--focused {
  border-color: var(--hl-primary);
  box-shadow: 0 0 0 2px rgba(0, 86, 179, 0.1);
}

.hl-input--error {
  border-color: var(--hl-danger);
}

.hl-input__inner {
  flex: 1;
  border: none;
  outline: none;
  padding: 10px 12px;
  font-size: 14px;
  background: transparent;
}

.hl-input__prefix,
.hl-input__suffix {
  display: flex;
  align-items: center;
  padding: 0 8px;
  color: var(--hl-text-secondary);
}

.hl-input--small .hl-input__inner {
  padding: 6px 10px;
  font-size: 12px;
}

.hl-input--large .hl-input__inner {
  padding: 14px 16px;
  font-size: 16px;
}
</style>
```

##### 3.2.3 卡片组件

```typescript
// src/components/card/HLCard.vue
<template>
  <div :class="cardClass" :style="style">
    <div v-if="$slots.header || header" class="hl-card__header">
      <slot name="header">
        <span class="hl-card__title">{{ header }}</span>
        <HLIcon v-if="closable" name="close" @click="handleClose" />
      </slot>
    </div>
    <div class="hl-card__body">
      <slot />
    </div>
    <div v-if="$slots.footer" class="hl-card__footer">
      <slot name="footer" />
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';

interface Props extends BaseComponentProps {
  /** 卡片标题 */
  header?: string;
  /** 是否显示关闭按钮 */
  closable?: boolean;
  /** 是否悬浮效果 */
  hoverable?: boolean;
  /** 阴影等级 */
  shadow?: 'never' | 'hover' | 'always';
  /** 是否边框 */
  bordered?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  closable: false,
  hoverable: true,
  shadow: 'hover',
  bordered: true
});

const emit = defineEmits<{
  close: [];
}>();

const cardClass = computed(() => [
  'hl-card',
  `hl-card--shadow-${props.shadow}`,
  {
    'hl-card--hoverable': props.hoverable,
    'hl-card--bordered': props.bordered
  },
  props.className
].filter(Boolean).join(' '));

const handleClose = () => {
  emit('close');
};
</script>

<style scoped>
.hl-card {
  background-color: white;
  border-radius: var(--hl-radius-lg);
  overflow: hidden;
  transition: all var(--hl-transition-normal);
}

.hl-card--bordered {
  border: 1px solid var(--hl-border);
}

.hl-card--shadow-hover:hover {
  box-shadow: var(--hl-shadow-lg);
}

.hl-card--shadow-always {
  box-shadow: var(--hl-shadow-md);
}

.hl-card--hoverable:hover {
  transform: translateY(-2px);
}

.hl-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--hl-border-light);
  font-weight: 600;
}

.hl-card__body {
  padding: 20px;
}

.hl-card__footer {
  padding: 12px 20px;
  border-top: 1px solid var(--hl-border-light);
  background-color: var(--hl-bg-light);
}
</style>
```

##### 3.2.4 模态框组件

```typescript
// src/components/modal/HLModal.vue
<template>
  <Teleport to="body">
    <Transition name="hl-modal">
      <div v-if="visible" :class="modalClass" @click.self="handleMaskClick">
        <div :class="dialogClass" :style="dialogStyle">
          <div class="hl-modal__header">
            <slot name="header">
              <span class="hl-modal__title">{{ title }}</span>
            </slot>
            <HLIcon name="close" @click="handleClose" />
          </div>
          <div class="hl-modal__body">
            <slot />
          </div>
          <div v-if="showFooter" class="hl-modal__footer">
            <slot name="footer">
              <HLButton @click="handleCancel">{{ cancelText }}</HLButton>
              <HLButton type="primary" @click="handleConfirm">{{ confirmText }}</HLButton>
            </slot>
          </div>
        </div>
      </div>
    </Transition>
  </Teleport>
</template>

<script setup lang="ts">
import { computed, watch } from 'vue';

interface Props {
  /** 是否显示 */
  visible?: boolean;
  /** 标题 */
  title?: string;
  /** 宽度 */
  width?: string | number;
  /** 是否显示遮罩 */
  mask?: boolean;
  /** 点击遮罩关闭 */
  maskClosable?: boolean;
  /** 是否显示footer */
  showFooter?: boolean;
  /** 确认按钮文本 */
  confirmText?: string;
  /** 取消按钮文本 */
  cancelText?: string;
  /** 是否ESC关闭 */
  keyboard?: boolean;
  /** 是否全屏 */
  fullscreen?: boolean;
  /** 居中 */
  centered?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
  visible: false,
  title: '',
  width: 520,
  mask: true,
  maskClosable: true,
  showFooter: true,
  confirmText: '确定',
  cancelText: '取消',
  keyboard: true,
  fullscreen: false,
  centered: true
});

const emit = defineEmits<{
  'update:visible': [value: boolean];
  confirm: [];
  cancel: [];
  close: [];
}>();

const modalClass = computed(() => [
  'hl-modal',
  {
    'hl-modal--with-mask': props.mask,
    'hl-modal--centered': props.centered
  }
]);

const dialogClass = computed(() => [
  'hl-modal__dialog',
  {
    'hl-modal__dialog--fullscreen': props.fullscreen
  }
]);

const dialogStyle = computed(() => ({
  width: typeof props.width === 'number' ? `${props.width}px` : props.width
}));

const handleClose = () => {
  emit('update:visible', false);
  emit('close');
};

const handleConfirm = () => {
  emit('confirm');
};

const handleCancel = () => {
  emit('update:visible', false);
  emit('cancel');
};

const handleMaskClick = () => {
  if (props.maskClosable) {
    handleClose();
  }
};

// ESC关闭处理
watch(() => props.visible, (val) => {
  if (val && props.keyboard) {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        handleClose();
      }
    };
    document.addEventListener('keydown', handleEsc);
    // Cleanup
    return () => document.removeEventListener('keydown', handleEsc);
  }
});
</script>

<style scoped>
.hl-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 100px;
}

.hl-modal--with-mask {
  background-color: rgba(0, 0, 0, 0.5);
}

.hl-modal--centered {
  align-items: center;
  padding-top: 0;
}

.hl-modal__dialog {
  background-color: white;
  border-radius: var(--hl-radius-lg);
  box-shadow: var(--hl-shadow-xl);
  max-width: 90vw;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.hl-modal__dialog--fullscreen {
  width: 100vw !important;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
}

.hl-modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--hl-border-light);
  font-size: 18px;
  font-weight: 600;
}

.hl-modal__body {
  padding: 24px;
  overflow-y: auto;
}

.hl-modal__footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid var(--hl-border-light);
}

/* 过渡动画 */
.hl-modal-enter-active,
.hl-modal-leave-active {
  transition: opacity 0.3s;
}

.hl-modal-enter-active .hl-modal__dialog,
.hl-modal-leave-active .hl-modal__dialog {
  transition: transform 0.3s;
}

.hl-modal-enter-from,
.hl-modal-leave-to {
  opacity: 0;
}

.hl-modal-enter-from .hl-modal__dialog,
.hl-modal-leave-to .hl-modal__dialog {
  transform: scale(0.9);
}
</style>
```

#### 3.3 业务组件封装

##### 3.3.1 商品卡片组件

```typescript
// src/components/product-card/ProductCard.vue
<template>
  <HLCard :class="cardClass" hoverable @click="handleClick">
    <div class="product-card__image">
      <img :src="product.mainImage" :alt="product.name" />
      <div v-if="product.discount" class="product-card__badge">
        {{ product.discount }}% OFF
      </div>
      <button class="product-card__quick-view" @click.stop="handleQuickView">
        <HLIcon name="eye" />
      </button>
    </div>
    <div class="product-card__content">
      <div class="product-card__category">{{ product.category }}</div>
      <h3 class="product-card__name">{{ product.name }}</h3>
      <div class="product-card__rating">
        <HLIcon v-for="i in 5" :key="i" :name="i <= product.rating ? 'star-filled' : 'star'" />
        <span class="product-card__reviews">({{ product.reviews }})</span>
      </div>
      <div class="product-card__price">
        <span class="product-card__current">¥{{ product.price }}</span>
        <span v-if="product.originalPrice" class="product-card__original">
          ¥{{ product.originalPrice }}
        </span>
      </div>
      <HLButton
        class="product-card__action"
        type="primary"
        size="small"
        :disabled="!product.inStock"
        @click.stop="handleAddToCart"
      >
        {{ product.inStock ? '加入购物车' : '暂时缺货' }}
      </HLButton>
    </div>
  </HLCard>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import HLCard from '@/components/card/HLCard.vue';
import HLButton from '@/components/button/HLButton.vue';
import HLIcon from '@/components/icon/HLIcon.vue';

/**
 * 商品信息
 */
interface Product {
  id: string;
  name: string;
  category: string;
  mainImage: string;
  price: number;
  originalPrice?: number;
  rating: number;
  reviews: number;
  discount?: number;
  inStock: boolean;
}

interface Props {
  product: Product;
  size?: 'small' | 'medium' | 'large';
}

const props = withDefaults(defineProps<Props>(), {
  size: 'medium'
});

const emit = defineEmits<{
  click: [product: Product];
  addToCart: [product: Product];
  quickView: [product: Product];
}>();

const cardClass = computed(() => [
  'product-card',
  `product-card--${props.size}`
]);

const handleClick = () => {
  emit('click', props.product);
};

const handleAddToCart = () => {
  emit('addToCart', props.product);
};

const handleQuickView = () => {
  emit('quickView', props.product);
};
</script>

<style scoped>
.product-card {
  cursor: pointer;
  overflow: hidden;
}

.product-card__image {
  position: relative;
  aspect-ratio: 1;
  overflow: hidden;
}

.product-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.product-card:hover .product-card__image img {
  transform: scale(1.05);
}

.product-card__badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 8px;
  background-color: var(--hl-danger);
  color: white;
  font-size: 12px;
  border-radius: var(--hl-radius-sm);
  font-weight: 600;
}

.product-card__quick-view {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background-color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.3s;
  cursor: pointer;
}

.product-card:hover .product-card__quick-view {
  opacity: 1;
  transform: translateY(0);
}

.product-card__content {
  padding: 16px;
}

.product-card__category {
  font-size: 12px;
  color: var(--hl-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.product-card__name {
  font-size: 16px;
  font-weight: 600;
  margin: 4px 0 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.product-card__rating {
  display: flex;
  align-items: center;
  gap: 2px;
  margin-bottom: 8px;
}

.product-card__reviews {
  font-size: 12px;
  color: var(--hl-text-secondary);
  margin-left: 4px;
}

.product-card__price {
  display: flex;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 12px;
}

.product-card__current {
  font-size: 20px;
  font-weight: 700;
  color: var(--hl-primary);
}

.product-card__original {
  font-size: 14px;
  color: var(--hl-text-secondary);
  text-decoration: line-through;
}

.product-card__action {
  width: 100%;
}
</style>
```

##### 3.3.2 隐私模式开关组件

```typescript
// src/components/privacy-switch/PrivacySwitch.vue
<template>
  <div :class="switchClass" @click="toggle">
    <div class="privacy-switch__track">
      <div class="privacy-switch__thumb">
        <HLIcon :name="modelValue ? 'shield-filled' : 'shield'" />
      </div>
    </div>
    <span class="privacy-switch__label">
      {{ modelValue ? '隐私模式已开启' : '隐私模式已关闭' }}
    </span>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import HLIcon from '@/components/icon/HLIcon.vue';

interface Props {
  modelValue: boolean;
  disabled?: boolean;
  size?: 'small' | 'medium' | 'large';
}

const props = withDefaults(defineProps<Props>(), {
  disabled: false,
  size: 'medium'
});

const emit = defineEmits<{
  'update:modelValue': [value: boolean];
}>();

const switchClass = computed(() => [
  'privacy-switch',
  `privacy-switch--${props.size}`,
  {
    'privacy-switch--active': props.modelValue,
    'privacy-switch--disabled': props.disabled
  }
]);

const toggle = () => {
  if (!props.disabled) {
    emit('update:modelValue', !props.modelValue);
  }
};
</script>

<style scoped>
.privacy-switch {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  user-select: none;
}

.privacy-switch--disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.privacy-switch__track {
  position: relative;
  width: 52px;
  height: 28px;
  background-color: var(--hl-border);
  border-radius: 9999px;
  transition: background-color 0.3s;
}

.privacy-switch--active .privacy-switch__track {
  background-color: var(--hl-primary);
}

.privacy-switch__thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  background-color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s;
}

.privacy-switch--active .privacy-switch__thumb {
  transform: translateX(24px);
}

.privacy-switch__label {
  font-size: 14px;
  color: var(--hl-text-primary);
}

.privacy-switch--small .privacy-switch__track {
  width: 44px;
  height: 24px;
}

.privacy-switch--small .privacy-switch__thumb {
  width: 20px;
  height: 20px;
}

.privacy-switch--small .privacy-switch__thumb {
  transform: translateX(20px);
}

.privacy-switch--large .privacy-switch__track {
  width: 60px;
  height: 32px;
}

.privacy-switch--large .privacy-switch__thumb {
  width: 28px;
  height: 28px;
}

.privacy-switch--large .privacy-switch__thumb {
  transform: translateX(28px);
}
</style>
```

#### 3.4 后端通用模块

##### 3.4.1 响应包装器

```typescript
// src/common/response.wrapper.ts
import { Injectable } from '@nestjs/common';

/**
 * 统一响应格式
 */
interface ApiResponse<T = any> {
  code: number;
  message: string;
  data?: T;
  timestamp: number;
  requestId: string;
}

/**
 * 分页响应
 */
interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
  totalPages: number;
}

/**
 * 响应包装器服务
 */
@Injectable()
export class ResponseWrapper {
  /**
   * 成功响应
   */
  success<T>(data?: T, message = 'success'): ApiResponse<T> {
    return {
      code: 0,
      message,
      data,
      timestamp: Date.now(),
      requestId: this.generateRequestId()
    };
  }

  /**
   * 分页响应
   */
  paginated<T>(
    items: T[],
    total: number,
    page: number,
    pageSize: number
  ): ApiResponse<PaginatedResponse<T>> {
    return this.success({
      items,
      total,
      page,
      pageSize,
      totalPages: Math.ceil(total / pageSize)
    });
  }

  /**
   * 错误响应
   */
  error(code: number, message: string, details?: any): ApiResponse {
    return {
      code,
      message,
      data: details,
      timestamp: Date.now(),
      requestId: this.generateRequestId()
    };
  }

  /**
   * 生成请求ID
   */
  private generateRequestId(): string {
    return `${Date.now()}-${Math.random().toString(36).substring(2, 15)}`;
  }
}
```

##### 3.4.2 分页通用装饰器

```typescript
// src/common/decorators/pagination.decorator.ts
import { createParamDecorator, ExecutionContext } from '@nestjs/common';

/**
 * 分页参数接口
 */
export interface PaginationParams {
  page: number;
  pageSize: number;
  skip: number;
  take: number;
}

/**
 * 分页参数装饰器
 */
export const Pagination = createParamDecorator(
  (data: unknown, ctx: ExecutionContext): PaginationParams => {
    const request = ctx.switchToHttp().getRequest();
    const query = request.query;

    const page = Math.max(1, parseInt(query.page) || 1);
    const pageSize = Math.min(100, Math.max(1, parseInt(query.pageSize) || 20));

    return {
      page,
      pageSize,
      skip: (page - 1) * pageSize,
      take: pageSize
    };
  }
);
```

### 4. 组件使用示例

#### 4.1 基础组件组合

```vue
<template>
  <HLCard header="用户登录" class="login-card">
    <HLForm @submit="handleLogin">
      <HLFormItem label="邮箱" required>
        <HLInput
          v-model="form.email"
          type="email"
          placeholder="请输入邮箱"
          prefix="mail"
        />
      </HLFormItem>
      <HLFormItem label="密码" required>
        <HLInput
          v-model="form.password"
          type="password"
          placeholder="请输入密码"
          prefix="lock"
          show-password
        />
      </HLFormItem>
      <HLButton type="primary" long :loading="loading">
        登录
      </HLButton>
    </HLForm>
  </HLCard>
</template>
```

### 5. 附录

#### 5.1 组件命名规范

| 类型 | 命名规范 | 示例 |
|------|----------|------|
| 基础组件 | HL + 名称 | HLButton, HLInput |
| 业务组件 | 功能名称 | ProductCard, OrderList |
| 页面组件 | Page + 名称 | LoginPage, HomePage |

#### 5.2 Props定义规范

```typescript
// ✓ 正确
interface Props {
  /** 按钮类型 */
  type: ButtonType;
  /** 是否禁用 */
  disabled?: boolean;
}

// ✗ 错误
interface Props {
  btnType: string;  // 应使用完整单词
  isDisabled: boolean;  // 布尔值不需要is前缀
}
```

---

> 「***YanYuCloudCube***」
> 「***<admin@0379.email>***」
> 「***Words Initiate Quadrants, Language Serves as Core for the Future***」
> 「***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***」
